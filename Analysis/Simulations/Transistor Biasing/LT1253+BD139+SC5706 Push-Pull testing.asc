Version 4
SHEET 1 3748 1496
WIRE -2544 -624 -2576 -624
WIRE -2448 -624 -2464 -624
WIRE -2432 -624 -2448 -624
WIRE -2240 -624 -2352 -624
WIRE -2192 -624 -2240 -624
WIRE -1856 -624 -2192 -624
WIRE -1792 -624 -1856 -624
WIRE -1376 -624 -1792 -624
WIRE -112 -624 -1376 -624
WIRE 16 -624 -112 -624
WIRE 64 -624 16 -624
WIRE 160 -624 64 -624
WIRE 432 -624 160 -624
WIRE -2576 -592 -2576 -624
WIRE -2192 -592 -2192 -624
WIRE -1792 -592 -1792 -624
WIRE 16 -592 16 -624
WIRE 160 -592 160 -624
WIRE -2448 -576 -2448 -624
WIRE -2448 -576 -2512 -576
WIRE -112 -576 -112 -624
WIRE -2192 -512 -2192 -528
WIRE -1792 -512 -1792 -528
WIRE 16 -512 16 -528
WIRE 160 -512 160 -528
WIRE -2512 -496 -2512 -512
WIRE -112 -480 -112 -496
WIRE 64 -432 64 -624
WIRE 64 -432 16 -432
WIRE 176 -432 64 -432
WIRE 16 -400 16 -432
WIRE 64 -400 64 -432
WIRE 176 -400 176 -432
WIRE -2448 -384 -2448 -576
WIRE 432 -384 432 -624
WIRE 688 -384 432 -384
WIRE -1376 -368 -1376 -624
WIRE -1296 -368 -1376 -368
WIRE -1216 -368 -1296 -368
WIRE -1120 -368 -1136 -368
WIRE -1072 -368 -1120 -368
WIRE -1040 -368 -1072 -368
WIRE -1296 -336 -1296 -368
WIRE -1120 -336 -1120 -368
WIRE -1040 -336 -1040 -368
WIRE 176 -320 176 -336
WIRE 240 -320 224 -320
WIRE 336 -320 320 -320
WIRE 432 -320 400 -320
WIRE 800 -320 432 -320
WIRE -864 -272 -976 -272
WIRE -1296 -256 -1296 -272
WIRE -1120 -256 -1120 -272
WIRE -1040 -256 -1040 -272
WIRE 432 -256 432 -320
WIRE -1072 -224 -1072 -368
WIRE -976 -224 -976 -272
WIRE 432 -224 432 -256
WIRE 688 -224 688 -384
WIRE 800 -208 800 -320
WIRE 1056 -208 896 -208
WIRE 1184 -208 1120 -208
WIRE 1216 -208 1184 -208
WIRE -1376 -192 -1376 -368
WIRE 1184 -192 1184 -208
WIRE -192 -176 -224 -176
WIRE -80 -176 -112 -176
WIRE 64 -176 64 -320
WIRE 64 -176 -16 -176
WIRE 112 -176 64 -176
WIRE 224 -176 224 -320
WIRE 224 -176 112 -176
WIRE 304 -176 224 -176
WIRE 368 -176 304 -176
WIRE 896 -160 896 -208
WIRE 112 -144 112 -176
WIRE -976 -128 -976 -144
WIRE 432 -112 432 -128
WIRE 448 -112 432 -112
WIRE 688 -112 688 -144
WIRE 800 -112 800 -128
WIRE 800 -112 688 -112
WIRE 800 -96 800 -112
WIRE 1184 -96 1184 -112
WIRE -1072 -80 -1072 -144
WIRE -864 -80 -864 -272
WIRE -816 -80 -864 -80
WIRE -624 -80 -752 -80
WIRE -608 -80 -624 -80
WIRE -512 -80 -528 -80
WIRE -464 -80 -512 -80
WIRE -304 -80 -400 -80
WIRE 432 -80 432 -112
WIRE 512 -80 512 -112
WIRE 688 -80 688 -112
WIRE -224 -64 -224 -176
WIRE 896 -64 896 -80
WIRE -1072 -48 -1072 -80
WIRE -624 -48 -624 -80
WIRE -512 -48 -512 -80
WIRE -304 -48 -304 -80
WIRE -1856 -32 -1856 -624
WIRE -2240 -16 -2240 -624
WIRE -1888 -16 -1920 -16
WIRE -2272 0 -2304 0
WIRE -1744 0 -1824 0
WIRE -1712 0 -1744 0
WIRE -1600 0 -1632 0
WIRE -1488 0 -1520 0
WIRE -1376 0 -1376 -112
WIRE -1376 0 -1424 0
WIRE -1200 0 -1376 0
WIRE -1136 0 -1200 0
WIRE 112 0 112 -64
WIRE 112 0 80 0
WIRE 688 0 688 -16
WIRE -2176 16 -2208 16
WIRE -2080 16 -2176 16
WIRE -1888 16 -2000 16
WIRE 80 16 80 0
WIRE 432 16 432 0
WIRE 512 16 512 0
WIRE 512 16 432 16
WIRE -2576 32 -2640 32
WIRE -2528 32 -2576 32
WIRE -2448 32 -2448 -304
WIRE -2448 32 -2464 32
WIRE -2416 32 -2448 32
WIRE -2272 32 -2336 32
WIRE 432 32 432 16
WIRE -1856 48 -1856 32
WIRE -1376 48 -1376 0
WIRE -624 48 -624 32
WIRE -512 48 -512 32
WIRE -2640 64 -2640 32
WIRE -2240 64 -2240 48
WIRE -1072 64 -1072 48
WIRE -960 64 -1072 64
WIRE -304 80 -304 32
WIRE 112 80 112 0
WIRE 240 80 224 80
WIRE 336 80 320 80
WIRE 416 80 400 80
WIRE 800 80 800 -16
WIRE 800 80 416 80
WIRE -1072 96 -1072 64
WIRE -960 96 -960 64
WIRE 416 112 416 80
WIRE -2304 128 -2304 0
WIRE -2272 128 -2304 128
WIRE -2176 128 -2176 16
WIRE -2176 128 -2192 128
WIRE -1920 128 -1920 -16
WIRE -1888 128 -1920 128
WIRE -1744 128 -1744 0
WIRE -1744 128 -1808 128
WIRE -1376 144 -1376 128
WIRE 416 144 416 112
WIRE -2640 160 -2640 144
WIRE -2304 160 -2304 128
WIRE -1920 160 -1920 128
WIRE -224 192 -224 16
WIRE -192 192 -224 192
WIRE -96 192 -112 192
WIRE 16 192 16 -320
WIRE 16 192 -32 192
WIRE 112 192 112 160
WIRE 112 192 16 192
WIRE 224 192 224 80
WIRE 224 192 112 192
WIRE 288 192 224 192
WIRE 352 192 288 192
WIRE -1072 208 -1072 176
WIRE -960 208 -960 160
WIRE -960 208 -1072 208
WIRE -2304 256 -2304 240
WIRE -1920 256 -1920 240
WIRE -1072 256 -1072 208
WIRE 416 256 416 240
WIRE 432 256 416 256
WIRE 416 288 416 256
WIRE 496 288 496 256
WIRE -2304 336 -2304 320
WIRE -1920 336 -1920 320
WIRE 416 384 416 368
WIRE 496 384 496 368
WIRE 496 384 416 384
WIRE 416 400 416 384
FLAG -112 -480 0
FLAG -2640 160 0
FLAG 416 400 0
FLAG 1216 -208 Vout
FLAG 1184 -96 0
FLAG 288 192 Vb1
FLAG 416 256 Ve1
FLAG -2576 32 Vin
FLAG 416 112 Vc1
FLAG 432 32 0
FLAG 304 -176 Vb2
FLAG 432 -112 Ve2
FLAG 432 -256 Vc2
FLAG -304 80 0
FLAG 80 16 0
FLAG 688 0 0
FLAG 176 -320 0
FLAG 16 -512 0
FLAG 896 -64 0
FLAG 160 -512 0
FLAG -1792 -512 0
FLAG -624 48 0
FLAG -512 48 0
FLAG -2192 -512 0
FLAG -2512 -496 0
FLAG -2240 64 0
FLAG -1856 48 0
FLAG -1920 336 0
FLAG -2576 -592 0
FLAG -2304 336 0
FLAG -1296 -256 0
FLAG -1376 144 0
FLAG -1072 256 0
FLAG -1120 -256 0
FLAG -1040 -256 0
FLAG -1200 0 Vb3
FLAG -1072 64 Ve3
FLAG -1072 -80 Vc3
FLAG -976 -128 0
SYMBOL npn 352 144 R0
WINDOW 0 73 15 Left 2
WINDOW 3 47 48 Left 2
SYMATTR InstName Q1
SYMATTR Value 2SC5706
SYMBOL voltage -2640 48 R0
WINDOW 0 -45 11 Left 2
WINDOW 3 -214 95 Left 2
WINDOW 123 -214 123 Left 2
WINDOW 39 -214 151 Left 2
SYMATTR InstName V1
SYMATTR Value SINE(0 {S} {F})
SYMATTR Value2 AC 1
SYMATTR SpiceLine Rser={Z}
SYMBOL voltage -112 -592 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL res 400 272 R0
SYMATTR InstName R4
SYMATTR Value 1
SYMBOL cap 1120 -224 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value .1µ
SYMBOL res 1168 -208 R0
SYMATTR InstName Rout
SYMATTR Value 50R
SYMBOL cap -400 -96 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C7
SYMATTR Value .1µ
SYMBOL npn 368 -224 R0
WINDOW 0 56 23 Left 2
WINDOW 3 52 50 Left 2
SYMATTR InstName Q2
SYMATTR Value 2SC5706
SYMBOL res 416 -96 R0
SYMATTR InstName R1
SYMATTR Value 1
SYMBOL ind2 -320 -64 R0
WINDOW 0 -22 29 Left 2
WINDOW 3 -56 85 Left 2
SYMATTR InstName L1
SYMATTR Value 11µ
SYMATTR Type ind
SYMBOL ind2 -240 -80 R0
SYMATTR InstName L2
SYMATTR Value 11µ
SYMATTR Type ind
SYMBOL res 48 -416 R0
SYMATTR InstName R8
SYMATTR Value 2200
SYMBOL res 96 -160 R0
SYMATTR InstName R5
SYMATTR Value 250
SYMBOL res 96 64 R0
SYMATTR InstName R6
SYMATTR Value 250
SYMBOL ind2 784 -224 R0
SYMATTR InstName L8
SYMATTR Value 11µ
SYMATTR Type ind
SYMBOL ind2 784 -112 R0
WINDOW 3 43 78 Left 2
SYMATTR Value 11µ
SYMATTR InstName L9
SYMATTR Type ind
SYMBOL ind2 880 -176 R0
SYMATTR InstName L7
SYMATTR Value 44µ
SYMATTR Type ind
SYMBOL ind2 672 -240 R0
SYMATTR InstName L6
SYMATTR Value 60µ
SYMATTR Type ind
SYMBOL cap 672 -80 R0
SYMATTR InstName C1
SYMATTR Value 100n
SYMBOL cap 160 -400 R0
SYMATTR InstName C2
SYMATTR Value .1µ
SYMBOL cap 0 -592 R0
SYMATTR InstName C9
SYMATTR Value 1µ
SYMBOL res 0 -416 R0
WINDOW 0 -33 33 Left 2
WINDOW 3 -82 78 Left 2
SYMATTR InstName R2
SYMATTR Value 2200
SYMBOL cap 144 -592 R0
SYMATTR InstName C8
SYMATTR Value 100µ
SYMBOL res -96 -192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rsense2
SYMATTR Value .001
SYMBOL res -96 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rsense1
SYMATTR Value .001
SYMBOL cap -16 -192 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value .1µ
SYMBOL cap -32 176 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value .1µ
SYMBOL cap 512 -128 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value .1µ
SYMBOL cap 496 240 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C10
SYMATTR Value .1µ
SYMBOL res 496 -96 R0
SYMATTR InstName R3
SYMATTR Value .5
SYMBOL res 480 272 R0
SYMATTR InstName R7
SYMATTR Value .5
SYMBOL cap 400 -336 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C11
SYMATTR Value 4n
SYMBOL res 336 -336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 1K
SYMBOL cap 400 64 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C12
SYMATTR Value 4n
SYMBOL res 336 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 1K
SYMBOL cap -1808 -592 R0
SYMATTR InstName C13
SYMATTR Value .1µ
SYMBOL res -640 -64 R0
SYMATTR InstName R14
SYMATTR Value 800
SYMBOL res -528 -64 R0
SYMATTR InstName R15
SYMATTR Value 800
SYMBOL res -512 -96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 6
SYMBOL cap -752 -96 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C19
SYMATTR Value .1µ
SYMBOL Opamps\\LT1253 -2240 -48 R0
SYMATTR InstName U1
SYMBOL Opamps\\LT1253 -1856 -64 R0
SYMATTR InstName U2
SYMBOL res -2464 -400 R0
SYMATTR InstName R19
SYMATTR Value 50
SYMBOL res -2336 -640 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 1K
SYMBOL res -2448 -640 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 1K
SYMBOL res -2320 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R22
SYMATTR Value 1K
SYMBOL res -1984 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value 1K
SYMBOL res -1792 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R24
SYMATTR Value 620
SYMBOL res -2176 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R25
SYMATTR Value 620
SYMBOL res -2288 256 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R26
SYMATTR Value 68
SYMBOL res -1904 256 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R27
SYMATTR Value 68
SYMBOL cap -2320 256 R0
WINDOW 0 36 38 Left 2
SYMATTR InstName C14
SYMATTR Value 100n
SYMBOL cap -1936 256 R0
SYMATTR InstName C15
SYMATTR Value 100n
SYMBOL cap -2528 -576 R0
SYMATTR InstName C22
SYMATTR Value 100n
SYMBOL cap -2208 -592 R0
SYMATTR InstName C23
SYMATTR Value 100n
SYMBOL cap -2464 16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C25
SYMATTR Value 100n
SYMBOL res -1616 -16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R28
SYMATTR Value 50
SYMBOL res -1504 -16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rsense3
SYMATTR Value .001
SYMBOL cap -1424 -16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C20
SYMATTR Value .1µ
SYMBOL res -1392 -208 R0
SYMATTR InstName R11
SYMATTR Value 535
SYMBOL res -1392 32 R0
SYMATTR InstName R12
SYMATTR Value 72
SYMBOL res -1088 80 R0
SYMATTR InstName R13
SYMATTR Value 3
SYMBOL cap -1312 -336 R0
SYMATTR InstName C16
SYMATTR Value 1µ
SYMBOL ind2 -1088 -240 R0
SYMATTR InstName L3
SYMATTR Value 35µ
SYMATTR Type ind
SYMBOL ind -1232 -352 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L4
SYMATTR Value 60µ
SYMBOL cap -1136 -336 R0
SYMATTR InstName C17
SYMATTR Value 1µ
SYMBOL cap -1056 -336 R0
SYMATTR InstName C18
SYMATTR Value .1µ
SYMBOL cap -976 96 R0
SYMATTR InstName C21
SYMATTR Value .1µ
SYMBOL ind2 -992 -240 R0
SYMATTR InstName L5
SYMATTR Value 35µ
SYMATTR Type ind
SYMBOL npn -1136 -48 R0
SYMATTR InstName Q3
SYMATTR Value BD139
TEXT -624 -312 Left 2 !.tran 0 50u 40u
TEXT 1288 -1176 Left 2 !.options plotwinsize=0\n.options numdgt = 8\n \n \n.meas TRAN Vinr RMS V(Vin)\n.meas TRAN Voutr RMS V(Vout)\n.meas TRAN Iinr RMS I(V1)\n.meas TRAN Ioutr RMS I(Rout)\n.meas TRAN Iina AVG I(V1)\n.meas TRAN Vina AVG V(Vin)\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Vbr1 RMS V(Vb1)\n.meas TRAN Vcr1 RMS V(Vc1)\n.meas TRAN Ver1 RMS V(Ve1)\n.meas TRAN Ibr1 RMS Ib(Q1)\n.meas TRAN Icr1 RMS Ic(Q1)\n.meas TRAN Ier1 RMS Ie(Q1)\n.meas TRAN Vbavg1 AVG V(Vb1)\n.meas TRAN Vbmax1 MAX V(Vb1)\n.meas TRAN Vbmin1 MIN V(Vb1)\n.meas TRAN Vppr1 PARAM Vbmax1-Vbmin1\n.meas TRAN Vpr1 PARAM Vbmax1-Vbe\n.meas TRAN Cd1 PARAM Vpr1/Vppr1\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Vbr2 RMS V(Vb2)\n.meas TRAN Vcr2 RMS V(Vc2)\n.meas TRAN Ver2 RMS V(Ve2)\n.meas TRAN Ibr2 RMS Ib(Q2)\n.meas TRAN Icr2 RMS Ic(Q2)\n.meas TRAN Ier2 RMS Ie(Q2)\n.meas TRAN Vbavg2 AVG V(Vb2)\n.meas TRAN Vbmax2 MAX V(Vb2)\n.meas TRAN Vbmin2 MIN V(Vb2)\n.meas TRAN Vppr2 PARAM Vbmax2-Vbmin2\n.meas TRAN Vpr2 PARAM Vbmax2-Vbe\n.meas TRAN Cd2 PARAM Vpr2/Vppr2\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Vbr3 RMS V(Vb3)\n.meas TRAN Vcr3 RMS V(Vc3)\n.meas TRAN Ver3 RMS V(Ve3)\n.meas TRAN Ibr3 RMS Ib(Q3)\n.meas TRAN Icr3 RMS Ic(Q3)\n.meas TRAN Ier3 RMS Ie(Q3)\n.meas TRAN Vbavg3 AVG V(Vb3)\n.meas TRAN Vbmax3 MAX V(Vb3)\n.meas TRAN Vbmin3 MIN V(Vb3)\n.meas TRAN Vppr3 PARAM Vbmax3-Vbmin3\n.meas TRAN Vpr3 PARAM Vbmax3-Vbe\n.meas TRAN Cd3 PARAM Vpr3/Vppr3\n;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN CdAngle1 PARAM Cd1*360\n.meas TRAN CdAngle2 PARAM Cd2*360\n.meas TRAN CdAngle3 PARAM Cd3*360\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Is1 RMS I(Rsense1)\n.meas TRAN Is2 RMS I(Rsense2)\n.meas TRAN Is3 RMS I(Rsense3)\n.meas TRAN Zin PARAM Vinr/Iinr\n.meas TRAN ZinQ1 PARAM Vbr1/Is1\n.meas TRAN ZinQ2 PARAM Vbr2/Is2 \n.meas TRAN ZinQ3 PARAM Vbr3/Is3 \n.meas TRAN ZoutQ1 PARAM Vcr1/Icr1\n.meas TRAN ZoutQ2 PARAM Vcr2/Icr2\n.meas TRAN ZoutQ3 PARAM Vcr3/Icr3\n;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Pdis1 AVG (V(Vc1,Ve1)*Ic(Q1) + V(Vb1,Ve1)*Ib(Q1))\n.meas TRAN Pdis2 AVG (V(Vc2,Ve2)*Ic(Q2) + V(Vb2,Ve2)*Ib(Q2))\n.meas TRAN Pdis3 AVG (V(Vc3,Ve3)*Ic(Q3) + V(Vb3,Ve3)*Ib(Q3))\n.meas TRAN Pin RMS (V(Vin)*V(Vin)/Zin)\n.meas TRAN Pout AVG (V(Vout)*I(Rout))\n.meas TRAN Pmar PARAM Pout-Pdis1-Pdis2\n ;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Gp PARAM 10*log10(Pout/Pin)\n.meas TRAN Gv PARAM 20*log10(Voutr/Vinr)\n.meas TRAN Gi PARAM 20*log10(Ioutr/Iinr)\n \n.four {F} 4 -1 V(Vout)
TEXT -1736 -928 Left 2 !;.step param F list 1.5Meg 3.7Meg 5.37Meg 7.1Meg 10.1Meg 14.1Meg 21.1Meg 28.7Meg\n.step param F list 3.7Meg 14.1Meg 28.7Meg\n;.param F 30Meg\n.param S 0.0005\n.param B 0.7\n.param Z 50\n.param Vbe 0.68
TEXT -624 -272 Left 2 ;.ac dec 1000 1Meg 30Meg
TEXT 832 48 Left 2 !K3 L7 L8 L9 1
TEXT -392 -144 Left 2 !K2 L1 L2 1
TEXT -1856 200 Left 2 ;5dB gain fixed here\nMay need 500R pot +68R here
TEXT -2688 256 Left 2 ;1K port +68R  \nUp to 20dB of gain here.
TEXT -1056 -96 Left 2 !K1 L3 L5 1
