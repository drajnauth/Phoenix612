Version 4
SHEET 1 3060 1616
WIRE 496 -176 256 -176
WIRE 608 -176 496 -176
WIRE 496 -160 496 -176
WIRE 256 -144 256 -176
WIRE 608 -128 608 -176
WIRE 496 -80 496 -96
WIRE 256 -48 256 -64
WIRE 512 32 432 32
WIRE 608 32 608 -48
WIRE 608 32 512 32
WIRE 432 48 432 32
WIRE 512 48 512 32
WIRE 608 80 608 32
WIRE 432 128 432 112
WIRE 512 128 512 112
WIRE 512 128 432 128
WIRE 512 160 512 128
WIRE 608 240 608 160
WIRE 688 240 608 240
WIRE 784 240 752 240
WIRE 912 240 784 240
WIRE 608 256 608 240
WIRE 608 288 608 256
WIRE 912 288 912 240
WIRE -32 368 -64 368
WIRE 80 368 48 368
WIRE 160 368 80 368
WIRE 336 368 224 368
WIRE 528 368 336 368
WIRE 560 368 528 368
WIRE -64 384 -64 368
WIRE 336 400 336 368
WIRE 912 400 912 368
WIRE 608 416 608 384
WIRE -64 480 -64 464
WIRE 336 624 336 480
WIRE 400 624 336 624
WIRE 512 624 480 624
WIRE 576 624 512 624
WIRE 624 624 576 624
WIRE 336 656 336 624
WIRE 624 656 624 624
WIRE 512 672 512 624
WIRE 336 736 336 720
WIRE 512 752 512 736
WIRE 624 752 624 736
FLAG 256 -48 0
FLAG 912 400 0
FLAG 784 240 Vout
FLAG -64 480 0
FLAG 80 368 Vin
FLAG 608 416 0
FLAG 528 368 Vg2
FLAG 608 256 Vd2
FLAG 512 752 0
FLAG 336 736 0
FLAG 624 752 0
FLAG 576 624 Vbias2
FLAG 496 -80 0
FLAG 112 416 0
FLAG 512 160 0
SYMBOL voltage 256 -160 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL res 896 272 R0
SYMATTR InstName Rout
SYMATTR Value 200
SYMBOL voltage -64 368 R0
WINDOW 123 -87 90 Left 2
WINDOW 39 -141 95 Left 2
WINDOW 0 -52 6 Left 2
WINDOW 3 -245 55 Left 2
SYMATTR Value2 AC 1
SYMATTR InstName V5
SYMATTR Value SINE(0 {S} {F})
SYMBOL nmos 560 288 R0
WINDOW 3 56 60 Left 2
SYMATTR Value BS170
SYMATTR InstName M2
SYMATTR Prefix X
SYMBOL ind2 592 64 R0
SYMATTR InstName L7
SYMATTR Value {L}
SYMATTR Type ind
SYMBOL res 320 384 R0
SYMATTR InstName R3
SYMATTR Value 100R
SYMBOL cap 688 256 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C4
SYMATTR Value .1µ
SYMBOL ind2 384 640 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 4 56 VBottom 2
SYMATTR InstName RFC2
SYMATTR Value 10µ
SYMATTR Type ind
SYMBOL cap 496 672 R0
SYMATTR InstName C10
SYMATTR Value .1µ
SYMBOL cap 320 656 R0
SYMATTR InstName C11
SYMATTR Value .1µ
SYMBOL voltage 624 640 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value {BM2}
SYMBOL cap 480 -160 R0
SYMATTR InstName C13
SYMATTR Value .1µ
SYMBOL cap 160 384 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C14
SYMATTR Value .1µ
SYMBOL cap 496 48 R0
SYMATTR InstName C1
SYMATTR Value .1µ
SYMBOL res 64 352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value {Z}
SYMBOL res 592 -144 R0
SYMATTR InstName R1
SYMATTR Value 10
SYMBOL cap 416 48 R0
SYMATTR InstName C2
SYMATTR Value 1µ
TEXT 200 248 Left 2 !.tran 0 20u 18u
TEXT 1320 -272 Left 2 !.options plotwinsize=0\n.options numdgt = 8\n \n.meas TRAN Vinr RMS V(Vin)\n.meas TRAN Voutr RMS V(Vout)\n.meas TRAN Iinr RMS I(V5)\n.meas TRAN Ioutr RMS I(Rout)\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Vgr2 RMS V(Vg2)\n.meas TRAN Vdr2 RMS V(Vd2)\n.meas TRAN Idr2 RMS Ix(M2:D)\n.meas TRAN Igr2 RMS Ix(M2:G)\n.meas TRAN Vgavg2 AVG V(Vg2)\n.meas TRAN Vgmax2 MAX V(Vg2)\n.meas TRAN Vgmin2 MIN V(Vg2)\n.meas TRAN Vbiasr2 RMS V(Vbias2)\n.meas TRAN Vppr2 PARAM Vgmax2-Vgmin2\n.meas TRAN Vpr2 PARAM Vgmax2-Vgs2\n.meas TRAN Cd2 PARAM Vpr2/Vppr2\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Pdis2 AVG (V(vd2)*Ix(M2:D) + V(vg2)*Ix(M2:G))\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Zin PARAM Vinr/Iinr\n.meas TRAN Zout PARAM Vdr2/Idr2\n.meas TRAN CdAngle2 PARAM Cd2*360\n.meas TRAN Pin RMS (V(Vin)*I(V1))\n.meas TRAN Pout AVG (V(Vout)*I(Rout))\n.meas TRAN Pdis PARAM Pdis2\n.meas TRAN Pmar PARAM Pout-Pdis\n ;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN K0 PARAM Idr2/(Vgr2-Vgs2)/(Vgr2-Vgs2)\n.meas TRAN GM0 PARAM  2*K0*(Vgr2-Vgs2)\n.meas TRAN Gvt PARAM GM0*Zout\n.meas TRAN Gpr PARAM (Pout/Pin)\n.meas TRAN Gvr PARAM (Voutr/Vinr)\n.meas TRAN Gp PARAM 10*log10(Gpr)\n.meas TRAN Gv PARAM 20*log10(Gvr)\n.meas TRAN Gi PARAM 20*log10(Ioutr/Iinr)\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n \n \n.four {F} 4 -1 V(Vout)
TEXT -704 136 Left 2 !;.step param F list 1.5Meg 3.7Meg 5.37Meg 7.1Meg 10.1Meg 14.1Meg 21.1Meg 28.7Meg\n;.step param F list  3.7Meg 14.1Meg 28.7Meg\n.param F 28.7Meg\n.param S .2\n.param BM2 3\n;.step param BM2 2.2 4 .2\n;.step param L 2u 20u 2u\n.param L 12u\n.param Z 50\n.param Vgs1 3.6\n.param Vgs2 2.1
TEXT 696 24 Left 2 ;K2 L7 L6 1
TEXT 536 464 Left 2 !.include bs170.lib
TEXT 736 152 Left 2 ;Need 4.5Vp Output at 100R
TEXT -8 296 Left 2 ;50 Zin
TEXT 200 280 Left 2 ;.ac dec 100 1Meg 30Meg
