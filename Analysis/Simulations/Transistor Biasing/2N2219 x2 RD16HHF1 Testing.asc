Version 4
SHEET 1 2764 1496
WIRE -1520 -304 -1584 -304
WIRE -1440 -304 -1520 -304
WIRE -1328 -304 -1360 -304
WIRE -1280 -304 -1328 -304
WIRE -1248 -304 -1280 -304
WIRE -1200 -304 -1248 -304
WIRE -1040 -304 -1120 -304
WIRE -960 -304 -1040 -304
WIRE -848 -304 -960 -304
WIRE -784 -304 -848 -304
WIRE -704 -304 -784 -304
WIRE -528 -304 -624 -304
WIRE -480 -304 -528 -304
WIRE -448 -304 -480 -304
WIRE -144 -304 -448 -304
WIRE -48 -304 -64 -304
WIRE 320 -304 -48 -304
WIRE -48 -288 -48 -304
WIRE -1520 -272 -1520 -304
WIRE -1328 -272 -1328 -304
WIRE -1248 -272 -1248 -304
WIRE -960 -272 -960 -304
WIRE -848 -272 -848 -304
WIRE -528 -272 -528 -304
WIRE -448 -272 -448 -304
WIRE -1040 -256 -1040 -304
WIRE -48 -208 -48 -224
WIRE -1520 -192 -1520 -208
WIRE -1328 -192 -1328 -208
WIRE -1248 -192 -1248 -208
WIRE -960 -192 -960 -208
WIRE -848 -192 -848 -208
WIRE -528 -192 -528 -208
WIRE -448 -192 -448 -208
WIRE -1040 -160 -1040 -176
WIRE 432 -160 400 -160
WIRE 320 -144 320 -304
WIRE 432 -128 432 -160
WIRE -320 -32 -368 -32
WIRE -224 -32 -256 -32
WIRE 432 -32 432 -48
WIRE 496 -32 432 -32
WIRE 608 -32 560 -32
WIRE 640 -32 608 -32
WIRE 112 -16 80 -16
WIRE 224 -16 192 -16
WIRE 320 -16 320 -64
WIRE 320 -16 288 -16
WIRE 400 -16 400 -160
WIRE 400 -16 320 -16
WIRE 608 -16 608 -32
WIRE -224 0 -224 -32
WIRE -784 16 -784 -304
WIRE -480 16 -480 -304
WIRE -368 16 -368 -32
WIRE 80 16 80 -16
WIRE 320 32 320 -16
WIRE -1120 48 -1168 48
WIRE -1024 48 -1056 48
WIRE 320 48 320 32
WIRE -1024 80 -1024 48
WIRE 608 80 608 64
WIRE -1584 96 -1584 -304
WIRE -1280 96 -1280 -304
WIRE -1168 96 -1168 48
WIRE -480 128 -480 96
WIRE -480 128 -528 128
WIRE -368 128 -368 96
WIRE -224 128 -224 80
WIRE -176 128 -224 128
WIRE -96 128 -112 128
WIRE 0 128 -16 128
WIRE 80 128 80 96
WIRE 80 128 0 128
WIRE 112 128 80 128
WIRE 240 128 192 128
WIRE 272 128 240 128
WIRE -480 160 -480 128
WIRE 0 176 0 128
WIRE -1280 208 -1280 176
WIRE -1280 208 -1328 208
WIRE -1168 208 -1168 176
WIRE -1024 208 -1024 160
WIRE -976 208 -1024 208
WIRE -784 208 -784 96
WIRE -784 208 -912 208
WIRE -608 208 -784 208
WIRE -544 208 -608 208
WIRE -1280 240 -1280 208
WIRE -784 256 -784 208
WIRE 0 272 0 256
WIRE 0 272 -48 272
WIRE 112 272 0 272
WIRE -1776 288 -1792 288
WIRE -1712 288 -1776 288
WIRE -1584 288 -1584 176
WIRE -1584 288 -1648 288
WIRE -1408 288 -1584 288
WIRE -1344 288 -1408 288
WIRE -480 304 -480 256
WIRE -448 304 -480 304
WIRE -352 304 -384 304
WIRE 0 304 0 272
WIRE 112 304 112 272
WIRE 320 320 320 144
WIRE -1792 336 -1792 288
WIRE -1584 336 -1584 288
WIRE -480 336 -480 304
WIRE -352 336 -352 304
WIRE -784 352 -784 336
WIRE -1280 384 -1280 336
WIRE -1248 384 -1280 384
WIRE -1152 384 -1184 384
WIRE 0 400 0 368
WIRE 112 400 112 384
WIRE -1280 416 -1280 384
WIRE -1152 416 -1152 384
WIRE -1792 432 -1792 416
WIRE -1584 432 -1584 416
WIRE -480 464 -480 416
WIRE -352 464 -352 416
WIRE -352 464 -480 464
WIRE -480 496 -480 464
WIRE -1280 544 -1280 496
WIRE -1152 544 -1152 496
WIRE -1152 544 -1280 544
WIRE -1280 576 -1280 544
FLAG -960 -192 0
FLAG -1040 -160 0
FLAG -1792 432 0
FLAG -784 352 0
FLAG -480 496 0
FLAG 640 -32 Vout
FLAG 608 80 0
FLAG -528 -192 0
FLAG -448 -192 0
FLAG -608 208 Vb2
FLAG -480 304 Ve2
FLAG -1776 288 Vin
FLAG -528 128 Vc2
FLAG -848 -192 0
FLAG -480 -304 Vcc
FLAG -368 128 0
FLAG 112 400 0
FLAG 320 320 0
FLAG 240 128 Vg1
FLAG 320 32 Vd1
FLAG 0 400 0
FLAG -48 272 Vbias
FLAG -48 -208 0
FLAG -224 128 Vs2
FLAG -1584 432 0
FLAG -1280 576 0
FLAG -1408 288 Vb1
FLAG -1280 384 Ve1
FLAG -1328 208 Vc1
FLAG -1168 208 0
FLAG -1024 208 Vs1
FLAG -1328 -192 0
FLAG -1248 -192 0
FLAG -1520 -192 0
SYMBOL voltage -1792 320 R0
WINDOW 0 -45 11 Left 2
WINDOW 3 -214 95 Left 2
WINDOW 123 -214 123 Left 2
WINDOW 39 -214 151 Left 2
SYMATTR InstName V1
SYMATTR Value SINE(0 {S} {F})
SYMATTR Value2 AC 1
SYMATTR SpiceLine Rser={Z}
SYMBOL voltage -1040 -272 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL res -800 0 R0
SYMATTR InstName Rb1
SYMATTR Value 1.3K
SYMBOL res -800 240 R0
SYMATTR InstName Rb2
SYMATTR Value 326
SYMBOL res -496 320 R0
SYMATTR InstName Re
SYMATTR Value 20
SYMBOL cap -976 -272 R0
SYMATTR InstName C2
SYMATTR Value .1µ
SYMBOL res 592 -32 R0
SYMATTR InstName Rout
SYMATTR Value 50
SYMBOL cap -544 -272 R0
SYMATTR InstName C4
SYMATTR Value 1µ
SYMBOL cap -464 -272 R0
SYMATTR InstName C5
SYMATTR Value .1µ
SYMBOL npn -544 160 R0
WINDOW 0 104 28 Left 2
SYMATTR InstName Q2
SYMATTR Value 2N2219A
SYMBOL ind2 -720 -288 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName RFC1
SYMATTR Value 10µ
SYMATTR Type ind
SYMBOL cap -864 -272 R0
SYMATTR InstName C8
SYMATTR Value 1µ
SYMBOL ind2 -496 0 R0
SYMATTR InstName L1
SYMATTR Value 88µ
SYMATTR Type ind
SYMBOL cap -384 288 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value .1µ
SYMBOL res -368 320 R0
SYMATTR InstName R1
SYMATTR Value 15
SYMBOL ind2 -384 0 R0
SYMATTR InstName L2
SYMATTR Value 11µ
SYMATTR Type ind
SYMBOL cap -112 112 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value .1µ
SYMBOL voltage 112 288 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value {B}
SYMBOL res -16 160 R0
SYMATTR InstName R2
SYMATTR Value 10K
SYMBOL cap 496 -16 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C9
SYMATTR Value .1µ
SYMBOL nmos 272 48 R0
SYMATTR InstName M1
SYMATTR Value RD16HHF1
SYMBOL cap -16 304 R0
SYMATTR InstName C10
SYMATTR Value .1µ
SYMBOL ind2 416 -144 R0
SYMATTR InstName L4
SYMATTR Value 8.8µ
SYMATTR Type ind
SYMBOL ind2 304 -160 R0
SYMATTR InstName L3
SYMATTR Value 2.2µ
SYMATTR Type ind
SYMBOL res 0 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 56
SYMBOL cap 288 -32 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C11
SYMATTR Value 4n
SYMBOL res 208 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 560
SYMBOL ind 96 112 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L6
SYMATTR Value 2.2µ
SYMBOL ind 96 144 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L7
SYMATTR Value 1n
SYMBOL ind -160 -288 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName RFC2
SYMATTR Value 10µ
SYMBOL cap -64 -288 R0
SYMATTR InstName C3
SYMATTR Value .1µ
SYMBOL cap -256 -48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C12
SYMATTR Value .1µ
SYMBOL res -240 -16 R0
SYMATTR InstName Rsense2
SYMATTR Value 0.001
SYMBOL res -1600 80 R0
SYMATTR InstName Rb3
SYMATTR Value 1.3K
SYMBOL res -1600 320 R0
SYMATTR InstName Rb4
SYMATTR Value 326
SYMBOL res -1296 400 R0
SYMATTR InstName Re1
SYMATTR Value 20
SYMBOL cap -1648 272 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C13
SYMATTR Value .1µ
SYMBOL npn -1344 240 R0
WINDOW 0 104 28 Left 2
SYMATTR InstName Q1
SYMATTR Value 2N2219A
SYMBOL ind2 -1296 80 R0
SYMATTR InstName L5
SYMATTR Value 11µ
SYMATTR Type ind
SYMBOL cap -1184 368 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C14
SYMATTR Value .1µ
SYMBOL res -1168 400 R0
SYMATTR InstName R5
SYMATTR Value 15
SYMBOL ind2 -1184 80 R0
SYMATTR InstName L8
SYMATTR Value 11µ
SYMATTR Type ind
SYMBOL cap -912 192 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C15
SYMATTR Value .1µ
SYMBOL cap -1056 32 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C16
SYMATTR Value .1µ
SYMBOL res -1040 64 R0
SYMATTR InstName Rsense1
SYMATTR Value 0.001
SYMBOL cap -1344 -272 R0
SYMATTR InstName C7
SYMATTR Value 1µ
SYMBOL cap -1264 -272 R0
SYMATTR InstName C17
SYMATTR Value .1µ
SYMBOL ind2 -1456 -288 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName RFC3
SYMATTR Value 10µ
SYMATTR Type ind
SYMBOL ind2 -1216 -288 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName RFC4
SYMATTR Value 10µ
SYMATTR Type ind
SYMBOL cap -1536 -272 R0
SYMATTR InstName C18
SYMATTR Value .1µ
TEXT 48 -536 Left 2 !.tran 0 20u 15u
TEXT 816 -888 Left 2 !.options plotwinsize=0\n.options numdgt = 8\n \n \n.meas TRAN Vinr RMS V(Vin)\n.meas TRAN Voutr RMS V(Vout)\n.meas TRAN Iinr RMS I(V1)\n.meas TRAN Ioutr RMS I(Rout)\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Vbr1 RMS V(Vb1)\n.meas TRAN Vcr1 RMS V(Vc1)\n.meas TRAN Ibr1 RMS Ib(Q1)\n.meas TRAN Icr1 RMS Ic(Q1)\n.meas TRAN Vbavg1 AVG V(Vb1)\n.meas TRAN Vbmax1 MAX V(Vb1)\n.meas TRAN Vbmin1 MIN V(Vb1)\n.meas TRAN Vppr1 PARAM Vbmax1-Vbmin1\n.meas TRAN Vpr1 PARAM Vbmax1-Vbe\n.meas TRAN CdQ1 PARAM Vpr1/Vppr1\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Vgr1 RMS V(Vg1)\n.meas TRAN Vdr1 RMS V(Vd1)\n.meas TRAN Idr1 RMS Id(M1)\n.meas TRAN Igr1 RMS Ig(m1)\n.meas TRAN Vgavg1 AVG V(Vg1)\n.meas TRAN Vgmax1 MAX V(Vg1)\n.meas TRAN Vgmin1 MIN V(Vg1)\n.meas TRAN Vbiasr RMS V(Vbias)\n.meas TRAN Vgppr1 PARAM Vgmax1-Vgmin1\n.meas TRAN Vgpr1 PARAM Vgmax1-Vgs\n.meas TRAN CdM1 PARAM Vgpr1/Vgppr1\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN PdisQ1 AVG (V(Vc1,Ve1)*Ic(Q1) + V(Vb1,Ve1)*Ib(Q1))\n.meas TRAN PdisM1 AVG (V(vd1)*Id(m1) + V(vg1)*Ig(m1))\n.meas TRAN Pdis PARAM PdisQ1+PdisM1\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Vsr1 RMS V(Vs1)\n.meas TRAN Isr1 RMS I(Rsense1)\n.meas TRAN Zin PARAM Vinr/Iinr\n.meas TRAN ZinM1 PARAM Vsr1/Isr1 \n.meas TRAN ZoutQ1 PARAM Vcr1/Icr1\n.meas TRAN ZoutM1 PARAM Vdr1/Idr1\n.meas TRAN CdQ1Angle PARAM CdQ1*360\n.meas TRAN Cd1MAngle PARAM CdM1*360\n.meas TRAN Pin AVG (Zin*I(V1)*I(V1))\n.meas TRAN Pout AVG (V(Vout)*I(Rout))\n.meas TRAN Pmar PARAM Pout-Pdis\n ;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Gp PARAM 10*log10(Pout/Pin)\n.meas TRAN G PARAM Voutr/Vinr\n.meas TRAN Gv PARAM 20*log10(Voutr/Vinr)\n.meas TRAN Gi PARAM 20*log10(Iinr/Ioutr)\n.meas TRAN BetaQ1 PARAM Icr1/Ibr1\n \n.four {F} 4 -1 V(Vout)
TEXT -376 -824 Left 2 !;.step param F list 1.5Meg 3.7Meg 5.37Meg 7.1Meg 10.1Meg 14.1Meg 21.1Meg 28.7Meg\n;.step param F list 3.7Meg 14.1Meg 28.7Meg\n.param F 30Meg\n;.step param S .01 0.2 0.04\n;.step param L 11u 110u 11u\n;.step param R 200 425 25\n.param S .01\n.param B 4.2\n.param Z 1\n.param Vbe 0.68\n.param Vgs 3.6
TEXT 40 -560 Left 2 ;.ac dec 1000 1Meg 30Meg
TEXT -456 -80 Left 2 !K1 L1 L2 1
TEXT 352 -200 Left 2 !K2 L3 L4 1
TEXT -1248 -32 Left 2 !K3 L5 L8 1
