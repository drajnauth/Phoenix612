Version 4
SHEET 1 4132 2836
WIRE 144 -80 32 -80
WIRE 256 -80 144 -80
WIRE 352 -80 256 -80
WIRE 480 -80 352 -80
WIRE 800 -80 480 -80
WIRE 1104 -80 800 -80
WIRE 1424 -80 1104 -80
WIRE 1760 -80 1424 -80
WIRE 2016 -80 1760 -80
WIRE 2368 -80 2016 -80
WIRE 2400 -80 2368 -80
WIRE 2592 -80 2400 -80
WIRE 144 -64 144 -80
WIRE 352 -64 352 -80
WIRE 480 -64 480 -80
WIRE 1104 -64 1104 -80
WIRE 1760 -64 1760 -80
WIRE 32 -32 32 -80
WIRE 2592 -32 2592 -80
WIRE 256 0 256 -80
WIRE 800 0 800 -80
WIRE 1424 0 1424 -80
WIRE 2016 0 2016 -80
WIRE 144 16 144 0
WIRE 352 16 352 0
WIRE 480 16 480 0
WIRE 1104 16 1104 0
WIRE 1760 16 1760 0
WIRE 32 80 32 48
WIRE 2592 112 2592 48
WIRE 2592 112 2528 112
WIRE 2656 112 2592 112
WIRE 256 128 256 80
WIRE 368 128 256 128
WIRE 464 128 432 128
WIRE 592 128 544 128
WIRE 800 128 800 80
WIRE 912 128 800 128
WIRE 1088 128 976 128
WIRE 1216 128 1168 128
WIRE 1424 128 1424 80
WIRE 1536 128 1424 128
WIRE 1680 128 1600 128
WIRE 1808 128 1760 128
WIRE 256 160 256 128
WIRE 256 160 192 160
WIRE 800 160 800 128
WIRE 800 160 736 160
WIRE 1424 160 1424 128
WIRE 1424 160 1360 160
WIRE 2016 160 2016 80
WIRE 2016 160 1952 160
WIRE 2064 160 2016 160
WIRE 2160 160 2128 160
WIRE 2272 160 2240 160
WIRE 2400 160 2400 -80
WIRE -80 224 -176 224
WIRE 48 224 -16 224
WIRE 176 224 48 224
WIRE 208 224 176 224
WIRE 592 224 592 128
WIRE 720 224 592 224
WIRE 752 224 720 224
WIRE 1216 224 1216 128
WIRE 1344 224 1216 224
WIRE 1376 224 1344 224
WIRE 1808 224 1808 128
WIRE 1936 224 1808 224
WIRE 1968 224 1936 224
WIRE 2272 224 2272 160
WIRE 2592 224 2592 112
WIRE -176 256 -176 224
WIRE 2592 256 2592 224
WIRE 256 272 256 256
WIRE 256 272 192 272
WIRE 304 272 256 272
WIRE 800 272 800 256
WIRE 800 272 736 272
WIRE 848 272 800 272
WIRE 1424 272 1424 256
WIRE 1424 272 1360 272
WIRE 1472 272 1424 272
WIRE 2016 272 2016 256
WIRE 2016 272 1952 272
WIRE 2064 272 2016 272
WIRE 48 288 48 224
WIRE 256 288 256 272
WIRE 592 288 592 224
WIRE 800 288 800 272
WIRE 1216 288 1216 224
WIRE 1424 288 1424 272
WIRE 1808 288 1808 224
WIRE 2016 288 2016 272
WIRE 192 304 192 272
WIRE 736 304 736 272
WIRE 1360 304 1360 272
WIRE 1952 304 1952 272
WIRE 2272 304 2272 224
WIRE 2304 304 2272 304
WIRE 2400 304 2400 240
WIRE 2400 304 2368 304
WIRE 2464 304 2400 304
WIRE 2528 304 2464 304
WIRE 2400 352 2400 304
WIRE 2592 384 2592 352
WIRE 192 416 192 368
WIRE 256 416 256 368
WIRE 256 416 192 416
WIRE 736 416 736 368
WIRE 800 416 800 368
WIRE 800 416 736 416
WIRE 1360 416 1360 368
WIRE 1424 416 1424 368
WIRE 1424 416 1360 416
WIRE 1952 416 1952 368
WIRE 2016 416 2016 368
WIRE 2016 416 1952 416
WIRE -176 448 -176 336
WIRE 48 448 48 368
WIRE 256 448 256 416
WIRE 592 448 592 368
WIRE 800 448 800 416
WIRE 1216 448 1216 368
WIRE 1424 448 1424 416
WIRE 1808 448 1808 368
WIRE 2016 448 2016 416
WIRE 2400 448 2400 432
WIRE 2592 464 2592 384
WIRE 2672 464 2592 464
WIRE 2832 464 2736 464
WIRE 2592 496 2592 464
WIRE 2832 544 2832 464
WIRE 2592 624 2592 576
WIRE 2832 656 2832 624
FLAG 32 80 0
FLAG 304 272 Vs1
FLAG 192 160 Vd1
FLAG -176 448 0
FLAG 256 448 0
FLAG 48 448 0
FLAG -176 224 Vin
FLAG 176 224 Vg1
FLAG 2832 656 0
FLAG 2832 464 Vout
FLAG -128 256 0
FLAG 144 16 0
FLAG 848 272 Vs2
FLAG 736 160 Vd2
FLAG 800 448 0
FLAG 592 448 0
FLAG 720 224 Vg2
FLAG 480 16 0
FLAG 352 16 0
FLAG 1472 272 Vs3
FLAG 1360 160 Vd3
FLAG 1424 448 0
FLAG 1216 448 0
FLAG 1344 224 Vg3
FLAG 1104 16 0
FLAG 2064 272 Vs4
FLAG 1952 160 Vd4
FLAG 2016 448 0
FLAG 1808 448 0
FLAG 1936 224 Vg4
FLAG 1760 16 0
FLAG 2400 448 0
FLAG 2592 624 0
FLAG 2464 304 Vb
FLAG 2592 384 Ve
FLAG 2592 224 Vc
FLAG 2368 -16 0
FLAG 2528 176 0
FLAG 2656 176 0
FLAG 2272 224 Vs5
SYMBOL njf 208 160 R0
SYMATTR InstName J1
SYMATTR Value J310
SYMBOL voltage 32 -48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vcc
SYMATTR Value 12
SYMBOL res 240 272 R0
SYMATTR InstName Rs
SYMATTR Value 254
SYMBOL res 32 272 R0
WINDOW 0 -50 32 Left 2
WINDOW 3 -77 65 Left 2
SYMATTR InstName Rg1
SYMATTR Value 1Meg
SYMBOL cap -16 208 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 1000µ
SYMBOL cap 432 112 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value .1µ
SYMBOL voltage -176 240 R0
WINDOW 0 -45 11 Left 2
WINDOW 3 -214 95 Left 2
WINDOW 123 -214 123 Left 2
WINDOW 39 -214 121 Left 2
SYMATTR InstName V1
SYMATTR Value SINE(0 {S} {F})
SYMATTR SpiceLine Rser={Z}
SYMBOL res 2816 528 R0
SYMATTR InstName Rout
SYMATTR Value 50
SYMBOL cap 176 304 R0
WINDOW 0 -26 14 Left 2
WINDOW 3 -56 58 Left 2
SYMATTR InstName C3
SYMATTR Value 1000µ
SYMBOL cap 128 -64 R0
SYMATTR InstName C4
SYMATTR Value 1000µ
SYMBOL njf 752 160 R0
SYMATTR InstName J2
SYMATTR Value J310
SYMBOL res 784 272 R0
SYMATTR InstName Rs1
SYMATTR Value 254
SYMBOL res 576 272 R0
WINDOW 0 -50 32 Left 2
WINDOW 3 -34 68 Left 2
SYMATTR InstName Rg2
SYMATTR Value 1K
SYMBOL cap 720 304 R0
WINDOW 0 -26 14 Left 2
WINDOW 3 -56 58 Left 2
SYMATTR InstName C5
SYMATTR Value .1µ
SYMBOL cap 464 -64 R0
SYMATTR InstName C7
SYMATTR Value .1µ
SYMBOL cap 336 -64 R0
SYMATTR InstName C8
SYMATTR Value 1µ
SYMBOL cap 976 112 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value .1µ
SYMBOL ind 784 -16 R0
SYMATTR InstName L1
SYMATTR Value 33µ
SYMBOL ind 240 -16 R0
SYMATTR InstName L2
SYMATTR Value 33µ
SYMBOL res 560 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rsense2
SYMATTR Value .0001
SYMBOL njf 1376 160 R0
SYMATTR InstName J3
SYMATTR Value J310
SYMBOL res 1408 272 R0
SYMATTR InstName Rs2
SYMATTR Value 254
SYMBOL res 1200 272 R0
WINDOW 0 -50 32 Left 2
WINDOW 3 -34 68 Left 2
SYMATTR InstName Rg3
SYMATTR Value 1K
SYMBOL cap 1344 304 R0
WINDOW 0 -26 14 Left 2
WINDOW 3 -56 58 Left 2
SYMATTR InstName C9
SYMATTR Value .1µ
SYMBOL cap 1088 -64 R0
SYMATTR InstName C10
SYMATTR Value .1µ
SYMBOL cap 1600 112 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C11
SYMATTR Value .1µ
SYMBOL ind 1408 -16 R0
SYMATTR InstName L3
SYMATTR Value 33µ
SYMBOL res 1184 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rsense3
SYMATTR Value .0001
SYMBOL njf 1968 160 R0
SYMATTR InstName J4
SYMATTR Value J310
SYMBOL res 2000 272 R0
SYMATTR InstName Rs3
SYMATTR Value 254
SYMBOL res 1792 272 R0
WINDOW 0 -50 32 Left 2
WINDOW 3 -34 68 Left 2
SYMATTR InstName Rg4
SYMATTR Value 1K
SYMBOL cap 1936 304 R0
WINDOW 0 -26 14 Left 2
WINDOW 3 -56 58 Left 2
SYMATTR InstName C12
SYMATTR Value .1µ
SYMBOL cap 2128 144 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 42 25 VTop 2
SYMATTR InstName C14
SYMATTR Value .1µ
SYMBOL ind2 2000 -16 R0
SYMATTR InstName L4
SYMATTR Value 33µ
SYMATTR Type ind
SYMBOL res 1776 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rsense4
SYMATTR Value .0001
SYMBOL cap 1744 -64 R0
SYMATTR InstName C15
SYMATTR Value .1µ
SYMBOL res 2384 144 R0
SYMATTR InstName Rb1
SYMATTR Value 1911
SYMBOL res 2384 336 R0
SYMATTR InstName Rb2
SYMATTR Value 840
SYMBOL res 2576 480 R0
SYMATTR InstName Re1
SYMATTR Value 50
SYMBOL npn 2528 256 R0
SYMATTR InstName Q1
SYMATTR Value 2N2219A
SYMBOL cap 2352 -80 R0
WINDOW 0 -28 15 Left 2
WINDOW 3 -38 41 Left 2
SYMATTR InstName C13
SYMATTR Value .1µ
SYMBOL cap 2512 112 R0
WINDOW 0 -41 4 Left 2
WINDOW 3 -45 36 Left 2
SYMATTR InstName C16
SYMATTR Value .1µ
SYMBOL ind2 2576 -48 R0
SYMATTR InstName RFC1
SYMATTR Value 10µ
SYMATTR Type ind
SYMBOL cap 2640 112 R0
SYMATTR InstName C17
SYMATTR Value 47µ
SYMBOL cap 2672 480 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C18
SYMATTR Value .1µ
SYMBOL cap 2368 288 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 42 25 VTop 2
SYMATTR InstName C19
SYMATTR Value .1µ
SYMBOL res 2256 144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rsense5
SYMATTR Value .0001
TEXT -312 -232 Left 2 !;.step param F list 1.5Meg 3.7Meg 5.37Meg 7.1Meg 10.1Meg 14.1Meg 21.1Meg 28.7Meg\n.step param F list 3.7Meg  7.1Meg 1 14.1Meg  28.7Meg\n;.param F 28.7Meg\n.param S .005\n;.step param R 1K 50K 1K\n.param Z 1\n.param Vgsoff -3.4\n.param Vbe 0.68
TEXT 3384 -288 Left 2 !.options plotwinsize=0\n.options numdgt = 8\n \n \n.meas TRAN Vinr RMS V(Vin)\n.meas TRAN Voutr RMS V(Vout)\n.meas TRAN Iinr RMS I(V1)\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Vgr1 RMS V(Vg1)\n.meas TRAN Vdr1 RMS V(Vd1)\n.meas TRAN Vsr1 RMS V(Vs1)\n.meas TRAN Igr1 RMS Ig(J1)\n.meas TRAN Isr1 RMS Is(J1)\n.meas TRAN Idr1 RMS Id(J1)\n.meas TRAN Vgavg1 AVG V(Vg1)\n.meas TRAN Vgmax1 MAX V(Vg1)\n.meas TRAN Vgmin1 MIN V(Vg1)\n.meas TRAN Vppr1 PARAM Vgmax1-Vgmin1\n.meas TRAN Vpr1 PARAM Vgmax1-Vgsoff\n.meas TRAN Cd1 PARAM Vpr1/Vppr1\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Vgr2 RMS V(Vg2)\n.meas TRAN Vdr2 RMS V(Vd2)\n.meas TRAN Vsr2 RMS V(Vs2)\n.meas TRAN Igr2 RMS Ig(J2)\n.meas TRAN Isr2 RMS Is(J2)\n.meas TRAN Idr2 RMS Id(J2)\n.meas TRAN Vgavg2 AVG V(Vg2)\n.meas TRAN Vgmax2 MAX V(Vg2)\n.meas TRAN Vgmin2 MIN V(Vg2)\n.meas TRAN Vppr2 PARAM Vgmax2-Vgmin2\n.meas TRAN Vpr2 PARAM Vgmax2-Vgsoff\n.meas TRAN Cd2 PARAM Vpr2/Vppr2\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Vgr3 RMS V(Vg3)\n.meas TRAN Vdr3 RMS V(Vd3)\n.meas TRAN Vsr3 RMS V(Vs3)\n.meas TRAN Igr3 RMS Ig(J3)\n.meas TRAN Isr3 RMS Is(J3)\n.meas TRAN Idr3 RMS Id(J3)\n.meas TRAN Vgavg3 AVG V(Vg3)\n.meas TRAN Vgmax3 MAX V(Vg3)\n.meas TRAN Vgmin3 MIN V(Vg3)\n.meas TRAN Vppr3 PARAM Vgmax3-Vgmin3\n.meas TRAN Vpr3 PARAM Vgmax3-Vgsoff\n.meas TRAN Cd3 PARAM Vpr3/Vppr3\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Vgr4 RMS V(Vg4)\n.meas TRAN Vdr4 RMS V(Vd4)\n.meas TRAN Vsr4 RMS V(Vs4)\n.meas TRAN Igr4 RMS Ig(J4)\n.meas TRAN Isr4 RMS Is(J4)\n.meas TRAN Idr4 RMS Id(J4)\n.meas TRAN Vgavg4 AVG V(Vg4)\n.meas TRAN Vgmax4 MAX V(Vg4)\n.meas TRAN Vgmin4 MIN V(Vg4)\n.meas TRAN Vppr4 PARAM Vgmax4-Vgmin4\n.meas TRAN Vpr4 PARAM Vgmax4-Vgsoff\n.meas TRAN Cd4 PARAM Vpr4/Vppr4\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Vbr RMS V(Vb)\n.meas TRAN Vcr RMS V(Vc)\n.meas TRAN Ver RMS V(Ve)\n.meas TRAN Ibr RMS Ib(Q1)\n.meas TRAN Icr RMS Ic(Q1)\n.meas TRAN Ier RMS Ie(Q1)\n.meas TRAN Vbavg5 AVG V(Vb)\n.meas TRAN Vbmax5 MAX V(Vb)\n.meas TRAN Vbmin5 MIN V(Vb)\n.meas TRAN Vppr5 PARAM Vbmax5-Vbmin5\n.meas TRAN Vpr5 PARAM Vbmax5-Vbe\n.meas TRAN CdQ1 PARAM Vpr5/Vppr5\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Pdis1 AVG (V(Vd1,Vs1)*Id(J1)+V(Vg1,Vs1)*Ig(J1))\n.meas TRAN Pdis2 AVG (V(Vd2,Vs2)*Id(J2)+V(Vg2,Vs2)*Ig(J2))\n.meas TRAN Pdis3 AVG (V(Vd3,Vs3)*Id(J3)+V(Vg3,Vs3)*Ig(J3))\n.meas TRAN Pdis4 AVG (V(Vd4,Vs4)*Id(J4)+V(Vg4,Vs4)*Ig(J4))\n.meas TRAN PdisQ1 AVG (V(Vc,Ve)*Ic(Q1) + V(Vb,Ve)*Ib(Q1))\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Is2 RMS I(Rsense2)\n.meas TRAN Is3 RMS I(Rsense3)\n.meas TRAN Is4 RMS I(Rsense4)\n.meas TRAN Is5 RMS I(Rsense5)\n.meas TRAN Vsr5 RMS V(Vs5)\n.meas TRAN Zin PARAM Vinr/Iinr\n.meas TRAN Zin2 PARAM Vgr2/Is2\n.meas TRAN Zin3 PARAM Vgr3/Is3\n.meas TRAN Zin4 PARAM Vgr4/Is4\n.meas TRAN Zin5 PARAM Vsrr/Is5\n.meas TRAN Zout PARAM Vcr/Icr\n.meas TRAN Cd1Angle PARAM Cd1*360\n.meas TRAN Cd2Angle PARAM Cd2*360\n.meas TRAN Cd3Angle PARAM Cd3*360\n.meas TRAN Cd4Angle PARAM Cd4*360\n.meas TRAN Cd5Angle PARAM CdQ1*360\n.meas TRAN Pin AVG (Zin*I(V1)*I(V1))\n \n.meas TRAN Pout AVG (V(Vout)*I(Rout))\n.meas TRAN Pmar PARAM Pout-Pdis1-Pdis2-Pdis3-Pdis4-PdisQ1\n ;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Gvr1 PARAM (Vgr2/Vinr)\n.meas TRAN Gvr2 PARAM (Vgr3/Vgr2)\n.meas TRAN Gvr3 PARAM (Vgr4/Vgr3)\n.meas TRAN Gvr4 PARAM (Vsr5/Vgr4)\n.meas TRAN Gvr5 PARAM (Voutr/Vsr5)\n.meas TRAN Gpr PARAM (Pout/Pin)\n.meas TRAN Gvr PARAM (Voutr/Vinr)\n.meas TRAN Gp PARAM 10*log10(Gpr)\n.meas TRAN Gv PARAM 20*log10(Gvr)\n \n \n.four {F} 4 -1 V(Vout)
TEXT 1096 -176 Left 2 !.tran 0 10u 8u
TEXT 1080 -144 Left 2 ;.ac dec 100 10000 30Meg
