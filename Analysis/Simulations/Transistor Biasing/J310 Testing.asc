Version 4
SHEET 1 1812 988
WIRE 64 -80 -176 -80
WIRE 256 -80 64 -80
WIRE 64 -64 64 -80
WIRE -176 -32 -176 -80
WIRE 256 0 256 -80
WIRE 64 16 64 0
WIRE -176 80 -176 48
WIRE 256 128 256 80
WIRE 368 128 256 128
WIRE 736 128 432 128
WIRE 256 160 256 128
WIRE 256 160 192 160
WIRE 736 176 736 128
WIRE -80 224 -176 224
WIRE 48 224 -16 224
WIRE 176 224 48 224
WIRE 208 224 176 224
WIRE -176 256 -176 224
WIRE 256 272 256 256
WIRE 256 272 192 272
WIRE 304 272 256 272
WIRE 48 288 48 224
WIRE 256 288 256 272
WIRE 192 304 192 272
WIRE 192 416 192 368
WIRE 256 416 256 368
WIRE 256 416 192 416
WIRE -176 448 -176 336
WIRE 48 448 48 368
WIRE 256 448 256 416
WIRE 736 448 736 256
FLAG -176 80 0
FLAG 304 272 Vs1
FLAG 192 160 Vd1
FLAG -176 448 0
FLAG 256 448 0
FLAG 48 448 0
FLAG -176 224 Vin
FLAG 176 224 Vg1
FLAG 736 448 0
FLAG 736 128 Vout
FLAG -128 256 0
FLAG 64 16 0
SYMBOL njf 208 160 R0
SYMATTR InstName J1
SYMATTR Value J310
SYMBOL voltage -176 -48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vcc
SYMATTR Value 12
SYMBOL res 240 272 R0
SYMATTR InstName Rs
SYMATTR Value 763
SYMBOL res 32 272 R0
WINDOW 0 -50 32 Left 2
WINDOW 3 -77 65 Left 2
SYMATTR InstName Rd1
SYMATTR Value 1Meg
SYMBOL cap -16 208 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 1000µ
SYMBOL cap 432 112 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 1000µ
SYMBOL voltage -176 240 R0
WINDOW 0 -45 11 Left 2
WINDOW 3 -214 95 Left 2
WINDOW 123 -214 123 Left 2
WINDOW 39 -214 121 Left 2
SYMATTR InstName V1
SYMATTR Value SINE(0 {S} {F})
SYMATTR SpiceLine Rser={Z}
SYMBOL res 720 160 R0
SYMATTR InstName Rout
SYMATTR Value 2086
SYMBOL res 272 96 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R1
SYMATTR Value 915
SYMBOL cap 176 304 R0
WINDOW 0 -26 14 Left 2
WINDOW 3 -56 58 Left 2
SYMATTR InstName C3
SYMATTR Value 1000µ
SYMBOL cap 48 -64 R0
SYMATTR InstName C4
SYMATTR Value 1000µ
TEXT -640 -136 Left 2 !;.step param F list 1.5Meg 3.7Meg 5.37Meg 7.1Meg 10.1Meg 14.1Meg 21.1Meg 28.7Meg\n;.step param F list 3.7Meg  7.1Meg 1 14.1Meg  28.7Meg\n.param F 1000\n.param S .0015\n;.step param R 10 100 10\n.param Z 1\n.param Vgsoff -3.4
TEXT 1064 -216 Left 2 !.options plotwinsize=0\n.options numdgt = 8\n \n \n.meas TRAN Vinr RMS V(Vin)\n.meas TRAN Voutr RMS V(Vout)\n.meas TRAN Iinr RMS I(V1)\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Vgr1 RMS V(Vg1)\n.meas TRAN Vdr1 RMS V(Vd1)\n.meas TRAN Vsr1 RMS V(Vs1)\n.meas TRAN Igr1 RMS Ig(J1)\n.meas TRAN Isr1 RMS Is(J1)\n.meas TRAN Idr1 RMS Id(J1)\n.meas TRAN Vgavg1 AVG V(Vg1)\n.meas TRAN Vgmax1 MAX V(Vg1)\n.meas TRAN Vgmin1 MIN V(Vg1)\n.meas TRAN Vppr1 PARAM Vgmax1-Vgmin1\n.meas TRAN Vpr1 PARAM Vgmax1-Vgsoff\n.meas TRAN Cd1 PARAM Vpr1/Vppr1\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Pdis1 AVG (V(Vd1,Vs1)*Id(J1)+V(Vg1,Vs1)*Ig(J1))\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Zin PARAM Vinr/Iinr\n.meas TRAN Zout PARAM Vdr1/Idr1\n.meas TRAN Cd1Angle PARAM Cd1*360\n.meas TRAN Pin AVG (Zin*I(V1)*I(V1))\n \n.meas TRAN Pout AVG (V(Vout)*I(Rout))\n;.meas TRAN Pmar PARAM Pout-Pdis\n ;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Gpr PARAM (Pout/Pin)\n.meas TRAN Gvr PARAM (Voutr/Vinr)\n.meas TRAN Gp PARAM 10*log10(Gpr)\n.meas TRAN Gv PARAM 20*log10(Gvr)\n \n \n.four {F} 4 -1 V(Vout)
TEXT -616 96 Left 2 !.tran 0 20m
TEXT -616 144 Left 2 ;.ac dec 100 1Meg 30Meg
