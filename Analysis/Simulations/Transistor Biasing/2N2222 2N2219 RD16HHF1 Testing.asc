Version 4
SHEET 1 2764 1496
WIRE -1248 -304 -1280 -304
WIRE -1200 -304 -1248 -304
WIRE -1088 -304 -1120 -304
WIRE -976 -304 -1088 -304
WIRE -960 -304 -976 -304
WIRE -864 -304 -880 -304
WIRE -800 -304 -864 -304
WIRE -752 -304 -800 -304
WIRE -704 -304 -752 -304
WIRE -528 -304 -624 -304
WIRE -480 -304 -528 -304
WIRE -448 -304 -480 -304
WIRE -144 -304 -448 -304
WIRE -48 -304 -64 -304
WIRE 320 -304 -48 -304
WIRE -48 -288 -48 -304
WIRE -1248 -272 -1248 -304
WIRE -864 -272 -864 -304
WIRE -800 -272 -800 -304
WIRE -528 -272 -528 -304
WIRE -448 -272 -448 -304
WIRE -1088 -256 -1088 -304
WIRE -48 -208 -48 -224
WIRE -1248 -192 -1248 -208
WIRE -864 -192 -864 -208
WIRE -800 -192 -800 -208
WIRE -528 -192 -528 -208
WIRE -448 -192 -448 -208
WIRE -1088 -160 -1088 -176
WIRE 432 -160 400 -160
WIRE 320 -144 320 -304
WIRE 432 -128 432 -160
WIRE -976 -80 -976 -304
WIRE -976 -80 -1088 -80
WIRE -320 -32 -368 -32
WIRE -224 -32 -256 -32
WIRE 432 -32 432 -48
WIRE 496 -32 432 -32
WIRE 608 -32 560 -32
WIRE 640 -32 608 -32
WIRE 112 -16 80 -16
WIRE 224 -16 192 -16
WIRE 320 -16 320 -64
WIRE 320 -16 288 -16
WIRE 400 -16 400 -160
WIRE 400 -16 320 -16
WIRE 608 -16 608 -32
WIRE -224 0 -224 -32
WIRE -976 16 -992 16
WIRE -896 16 -912 16
WIRE -752 16 -752 -304
WIRE -480 16 -480 -304
WIRE -368 16 -368 -32
WIRE 80 16 80 -16
WIRE 320 32 320 -16
WIRE -1088 48 -1088 -80
WIRE 320 48 320 32
WIRE -992 64 -992 16
WIRE -896 64 -896 16
WIRE 608 80 608 64
WIRE -1280 96 -1280 -304
WIRE -480 128 -480 96
WIRE -480 128 -528 128
WIRE -368 128 -368 96
WIRE -224 128 -224 80
WIRE -176 128 -224 128
WIRE -96 128 -112 128
WIRE 0 128 -16 128
WIRE 80 128 80 96
WIRE 80 128 0 128
WIRE 112 128 80 128
WIRE 240 128 192 128
WIRE 272 128 240 128
WIRE -992 160 -992 144
WIRE -480 160 -480 128
WIRE 0 176 0 128
WIRE -1088 208 -1088 128
WIRE -896 208 -896 144
WIRE -896 208 -912 208
WIRE -848 208 -896 208
WIRE -752 208 -752 96
WIRE -752 208 -784 208
WIRE -608 208 -752 208
WIRE -544 208 -608 208
WIRE -1088 240 -1088 208
WIRE -752 256 -752 208
WIRE 0 272 0 256
WIRE 0 272 -48 272
WIRE 112 272 0 272
WIRE -1776 288 -1792 288
WIRE -1712 288 -1776 288
WIRE -1408 288 -1648 288
WIRE -1280 288 -1280 176
WIRE -1280 288 -1344 288
WIRE -1184 288 -1280 288
WIRE -1152 288 -1184 288
WIRE -480 304 -480 256
WIRE -448 304 -480 304
WIRE -352 304 -384 304
WIRE 0 304 0 272
WIRE 112 304 112 272
WIRE 320 320 320 144
WIRE -1792 336 -1792 288
WIRE -1280 336 -1280 288
WIRE -480 336 -480 304
WIRE -352 336 -352 304
WIRE -1088 352 -1088 336
WIRE -1072 352 -1088 352
WIRE -976 352 -1008 352
WIRE -752 352 -752 336
WIRE -1088 384 -1088 352
WIRE -976 384 -976 352
WIRE 0 400 0 368
WIRE 112 400 112 384
WIRE -1792 432 -1792 416
WIRE -1280 432 -1280 416
WIRE -480 464 -480 416
WIRE -352 464 -352 416
WIRE -352 464 -480 464
WIRE -1088 496 -1088 464
WIRE -976 496 -976 464
WIRE -976 496 -1088 496
WIRE -480 496 -480 464
WIRE -1088 528 -1088 496
FLAG -864 -192 0
FLAG -1088 -160 0
FLAG -1792 432 0
FLAG -752 352 0
FLAG -480 496 0
FLAG 640 -32 Vout
FLAG 608 80 0
FLAG -528 -192 0
FLAG -448 -192 0
FLAG -608 208 Vb2
FLAG -480 304 Ve2
FLAG -1776 288 Vin
FLAG -528 128 Vc2
FLAG -800 -192 0
FLAG -480 -304 Vcc
FLAG -368 128 0
FLAG 112 400 0
FLAG 320 320 0
FLAG 240 128 Vg1
FLAG 320 32 Vd1
FLAG 0 400 0
FLAG -48 272 Vbias
FLAG -48 -208 0
FLAG -224 128 Vs2
FLAG -1248 -192 0
FLAG -1280 432 0
FLAG -1184 288 Vb1
FLAG -1088 352 Ve1
FLAG -1088 208 Vc1
FLAG -992 160 0
FLAG -1088 528 0
FLAG -912 208 Vs1
SYMBOL voltage -1792 320 R0
WINDOW 0 -45 11 Left 2
WINDOW 3 -214 95 Left 2
WINDOW 123 -214 123 Left 2
WINDOW 39 -214 151 Left 2
SYMATTR InstName V1
SYMATTR Value SINE(0 {S} {F})
SYMATTR Value2 AC 1
SYMATTR SpiceLine Rser={Z}
SYMBOL voltage -1088 -272 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL res -768 0 R0
SYMATTR InstName Rb1
SYMATTR Value 1.3K
SYMBOL res -768 240 R0
SYMATTR InstName Rb2
SYMATTR Value 326
SYMBOL res -496 320 R0
SYMATTR InstName Re
SYMATTR Value 20
SYMBOL cap -880 -272 R0
SYMATTR InstName C2
SYMATTR Value .1µ
SYMBOL res 592 -32 R0
SYMATTR InstName Rout
SYMATTR Value 50
SYMBOL cap -544 -272 R0
SYMATTR InstName C4
SYMATTR Value 1µ
SYMBOL cap -464 -272 R0
SYMATTR InstName C5
SYMATTR Value .1µ
SYMBOL npn -544 160 R0
WINDOW 0 63 21 Left 2
WINDOW 3 62 53 Left 2
SYMATTR InstName Q2
SYMATTR Value 2N2219A
SYMBOL ind2 -720 -288 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName RFC1
SYMATTR Value 10µ
SYMATTR Type ind
SYMBOL cap -816 -272 R0
SYMATTR InstName C8
SYMATTR Value 1µ
SYMBOL ind2 -496 0 R0
SYMATTR InstName L1
SYMATTR Value 88µ
SYMATTR Type ind
SYMBOL cap -384 288 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value .1µ
SYMBOL res -368 320 R0
SYMATTR InstName R1
SYMATTR Value 15
SYMBOL ind2 -384 0 R0
SYMATTR InstName L2
SYMATTR Value 11µ
SYMATTR Type ind
SYMBOL cap -112 112 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value .1µ
SYMBOL voltage 112 288 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value {B}
SYMBOL res -16 160 R0
SYMATTR InstName R2
SYMATTR Value 10K
SYMBOL cap 496 -16 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C9
SYMATTR Value .1µ
SYMBOL nmos 272 48 R0
WINDOW 0 56 21 Left 2
WINDOW 3 56 44 Left 2
SYMATTR InstName M1
SYMATTR Value RD16HHF1
SYMBOL cap -16 304 R0
SYMATTR InstName C10
SYMATTR Value .1µ
SYMBOL ind2 416 -144 R0
SYMATTR InstName L4
SYMATTR Value 88µ
SYMATTR Type ind
SYMBOL ind2 304 -160 R0
SYMATTR InstName L3
SYMATTR Value 22µ
SYMATTR Type ind
SYMBOL res 0 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 56
SYMBOL cap 288 -32 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C11
SYMATTR Value 4n
SYMBOL res 208 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 560
SYMBOL ind 96 112 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L6
SYMATTR Value 2.2µ
SYMBOL ind 96 144 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L7
SYMATTR Value 1n
SYMBOL ind -160 -288 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName RFC2
SYMATTR Value 10µ
SYMBOL cap -64 -288 R0
SYMATTR InstName C3
SYMATTR Value .1µ
SYMBOL cap -256 -48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C12
SYMATTR Value .1µ
SYMBOL res -240 -16 R0
SYMATTR InstName Rsense2
SYMATTR Value 0.001
SYMBOL cap -1648 272 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C13
SYMATTR Value .1µ
SYMBOL cap -1264 -272 R0
SYMATTR InstName C17
SYMATTR Value .1µ
SYMBOL ind2 -976 -288 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName RFC3
SYMATTR Value 10µ
SYMATTR Type ind
SYMBOL ind2 -1216 -288 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName RFC4
SYMATTR Value 10µ
SYMATTR Type ind
SYMBOL res -1296 80 R0
SYMATTR InstName R5
SYMATTR Value 17.4K
SYMBOL res -1296 320 R0
SYMATTR InstName R6
SYMATTR Value 3.4K
SYMBOL res -1104 368 R0
SYMATTR InstName R7
SYMATTR Value 165
SYMBOL ind2 -1104 32 R0
SYMATTR InstName L5
SYMATTR Value 11µ
SYMATTR Type ind
SYMBOL cap -1344 272 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C15
SYMATTR Value .1µ
SYMBOL cap -1008 336 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C16
SYMATTR Value .1µ
SYMBOL ind2 -1008 48 R0
SYMATTR InstName L8
SYMATTR Value 66µ
SYMATTR Type ind
SYMBOL npn -1152 240 R0
WINDOW 3 56 53 Left 2
SYMATTR Value 2N2222A
SYMATTR InstName Q1
SYMBOL res -992 368 R0
SYMATTR InstName R8
SYMATTR Value 2
SYMBOL cap -912 0 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C19
SYMATTR Value .1µ
SYMBOL res -912 48 R0
SYMATTR InstName Rsense1
SYMATTR Value 0.001
SYMBOL cap -784 192 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C20
SYMATTR Value .1µ
TEXT 48 -536 Left 2 !.tran 0 20u
TEXT 816 -888 Left 2 !.options plotwinsize=0\n.options numdgt = 8\n \n \n.meas TRAN Vinr RMS V(Vin)\n.meas TRAN Voutr RMS V(Vout)\n.meas TRAN Iinr RMS I(V1)\n.meas TRAN Ioutr RMS I(Rout)\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Vbr1 RMS V(Vb1)\n.meas TRAN Vcr1 RMS V(Vc1)\n.meas TRAN Ibr1 RMS Ib(Q1)\n.meas TRAN Icr1 RMS Ic(Q1)\n.meas TRAN Vbavg1 AVG V(Vb1)\n.meas TRAN Vbmax1 MAX V(Vb1)\n.meas TRAN Vbmin1 MIN V(Vb1)\n.meas TRAN Vppr1 PARAM Vbmax1-Vbmin1\n.meas TRAN Vpr1 PARAM Vbmax1-Vbe\n.meas TRAN CdQ1 PARAM Vpr1/Vppr1\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Vbr2 RMS V(Vb2)\n.meas TRAN Vcr2 RMS V(Vc2)\n.meas TRAN Ibr2 RMS Ib(Q2)\n.meas TRAN Icr2 RMS Ic(Q2)\n.meas TRAN Vbavg2 AVG V(Vb2)\n.meas TRAN Vbmax2 MAX V(Vb2)\n.meas TRAN Vbmin2 MIN V(Vb2)\n.meas TRAN Vppr2 PARAM Vbmax2-Vbmin2\n.meas TRAN Vpr2 PARAM Vbmax2-Vbe\n.meas TRAN CdQ2 PARAM Vpr2/Vppr2\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Vgr1 RMS V(Vg1)\n.meas TRAN Vdr1 RMS V(Vd1)\n.meas TRAN Idr1 RMS Id(M1)\n.meas TRAN Igr1 RMS Ig(m1)\n.meas TRAN Vgavg1 AVG V(Vg1)\n.meas TRAN Vgmax1 MAX V(Vg1)\n.meas TRAN Vgmin1 MIN V(Vg1)\n.meas TRAN Vbiasr RMS V(Vbias)\n.meas TRAN Vgppr1 PARAM Vgmax1-Vgmin1\n.meas TRAN Vgpr1 PARAM Vgmax1-Vgs\n.meas TRAN CdM1 PARAM Vgpr1/Vgppr1\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN PdisQ1 AVG (V(Vc1,Ve1)*Ic(Q1) + V(Vb1,Ve1)*Ib(Q1))\n.meas TRAN PdisQ2 AVG (V(Vc2,Ve2)*Ic(Q2) + V(Vb2,Ve2)*Ib(Q2))\n.meas TRAN PdisM1 AVG (V(vd1)*Id(m1) + V(vg1)*Ig(m1))\n.meas TRAN Pdis PARAM PdisQ1+PdisM1\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Vsr1 RMS V(Vs1)\n.meas TRAN Isr1 RMS I(Rsense1)\n.meas TRAN Vsr2 RMS V(Vs2)\n.meas TRAN Isr2 RMS I(Rsense2)\n.meas TRAN Zin PARAM Vinr/Iinr\n.meas TRAN ZinQ2 PARAM Vsr2/Isr2 \n.meas TRAN ZinM1 PARAM Vsr1/Isr1 \n.meas TRAN ZoutQ1 PARAM Vcr1/Icr1\n.meas TRAN ZoutQ2 PARAM Vcr2/Icr2\n.meas TRAN ZoutM1 PARAM Vdr1/Idr1\n.meas TRAN CdQ1Angle PARAM CdQ1*360\n.meas TRAN CdQ2Angle PARAM CdQ2*360\n.meas TRAN Cd1MAngle PARAM CdM1*360\n.meas TRAN Pin AVG (Zin*I(V1)*I(V1))\n.meas TRAN Pout AVG (V(Vout)*I(Rout))\n.meas TRAN Pmar PARAM Pout-Pdis\n ;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Gp PARAM 10*log10(Pout/Pin)\n.meas TRAN G PARAM Voutr/Vinr\n.meas TRAN Gv PARAM 20*log10(Voutr/Vinr)\n.meas TRAN Gi PARAM 20*log10(Iinr/Ioutr)\n.meas TRAN BetaQ1 PARAM Icr1/Ibr1\n.meas TRAN BetaQ2 PARAM Icr2/Ibr2\n \n.four {F} 4 -1 V(Vout)
TEXT -376 -824 Left 2 !;.step param F list 1.5Meg 3.7Meg 5.37Meg 7.1Meg 10.1Meg 14.1Meg 21.1Meg 28.7Meg\n.step param F list 3.7Meg 14.1Meg 28.7Meg\n;.param F 30Meg\n;.step param S .01 0.2 0.04\n;.step param L 11u 110u 11u\n;.step param R 200 425 25\n.param S .018\n.param B 5.7\n.param Z 1\n.param Vbe 0.68\n.param Vgs 3.6
TEXT 40 -560 Left 2 ;.ac dec 1000 1Meg 30Meg
TEXT -456 -80 Left 2 !K1 L1 L2 1
TEXT 352 -200 Left 2 !K2 L3 L4 1
TEXT -1240 8 Left 2 !K3 L5 L8 1
