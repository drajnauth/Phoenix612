Version 4
SHEET 1 1812 1200
WIRE 64 -80 -176 -80
WIRE 256 -80 64 -80
WIRE 64 -64 64 -80
WIRE -176 -32 -176 -80
WIRE 256 0 256 -80
WIRE 64 16 64 0
WIRE -176 80 -176 48
WIRE 256 176 256 80
WIRE 256 176 192 176
WIRE 544 176 256 176
WIRE 688 176 608 176
WIRE 928 176 688 176
WIRE -32 240 -224 240
WIRE 176 240 -32 240
WIRE 208 240 176 240
WIRE -32 256 -32 240
WIRE 928 256 928 176
WIRE 256 304 256 272
WIRE 256 304 192 304
WIRE -224 320 -224 240
WIRE -32 336 -32 320
WIRE 256 336 256 304
WIRE 688 368 688 304
WIRE 928 368 928 336
WIRE -224 432 -224 400
WIRE 256 528 256 416
WIRE 256 528 192 528
WIRE -80 592 -176 592
WIRE 48 592 -16 592
WIRE 176 592 48 592
WIRE 208 592 176 592
WIRE -176 624 -176 592
WIRE 256 640 256 624
WIRE 256 640 192 640
WIRE 304 640 256 640
WIRE 48 656 48 592
WIRE 256 656 256 640
WIRE 192 672 192 640
WIRE 192 784 192 736
WIRE 256 784 256 736
WIRE 256 784 192 784
WIRE -176 816 -176 704
WIRE 48 816 48 736
WIRE 256 816 256 784
FLAG -176 80 0
FLAG 304 640 Vs1
FLAG 192 528 Vd1
FLAG -176 816 0
FLAG 256 816 0
FLAG 48 816 0
FLAG -176 592 Vin
FLAG 176 592 Vg1
FLAG 688 368 0
FLAG 688 176 Vout
FLAG -128 624 0
FLAG 64 16 0
FLAG 192 176 Vd2
FLAG 176 240 Vg2
FLAG -224 432 0
FLAG -32 336 0
FLAG 192 304 Vs2
FLAG 928 368 0
SYMBOL njf 208 528 R0
SYMATTR InstName J1
SYMATTR Value J310
SYMBOL voltage -176 -48 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vcc
SYMATTR Value 12
SYMBOL res 240 640 R0
SYMATTR InstName Rs
SYMATTR Value 47
SYMBOL res 32 640 R0
WINDOW 0 -50 32 Left 2
WINDOW 3 -77 65 Left 2
SYMATTR InstName Rg1
SYMATTR Value 2.2K
SYMBOL cap -16 576 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value .1µ
SYMBOL cap 608 160 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value .1µ
SYMBOL voltage -176 608 R0
WINDOW 0 -45 11 Left 2
WINDOW 3 -214 95 Left 2
WINDOW 123 -214 123 Left 2
WINDOW 39 -214 121 Left 2
SYMATTR InstName V1
SYMATTR Value SINE(0 {S} {F})
SYMATTR SpiceLine Rser={Z}
SYMBOL res 672 208 R0
SYMATTR InstName Rout
SYMATTR Value 2086
SYMBOL cap 176 672 R0
WINDOW 0 -26 14 Left 2
WINDOW 3 -56 58 Left 2
SYMATTR InstName C3
SYMATTR Value 4.7µ
SYMBOL cap 48 -64 R0
SYMATTR InstName C4
SYMATTR Value 100µ
SYMBOL njf 208 176 R0
SYMATTR InstName J2
SYMATTR Value J310
SYMBOL voltage -224 304 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vbias
SYMATTR Value {Vb}
SYMBOL cap -48 256 R0
SYMATTR InstName C5
SYMATTR Value 10nF
SYMBOL ind 240 -16 R0
SYMATTR InstName L1
SYMATTR Value 100µ
SYMBOL res 240 320 R0
SYMATTR InstName R1
SYMATTR Value 0.0001
SYMBOL voltage 928 240 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR Value2 AC 1
SYMATTR InstName Vz
SYMATTR Value ""
TEXT -640 -136 Left 2 !;.step param F list 1.5Meg 3.7Meg 5.37Meg 7.1Meg 10.1Meg 14.1Meg 21.1Meg 28.7Meg\n;.step param F list 3.7Meg  7.1Meg 1 14.1Meg  28.7Meg\n.param F 28.7Meg\n.param S .0015\n.param Vb 2.6\n;.step param R 10 100 10\n;.step param Vb 2 3 .1\n.param Z 1\n.param Vgsoff -3.4
TEXT 1064 -216 Left 2 !.options plotwinsize=0\n.options numdgt = 8\n \n \n.meas TRAN Vinr RMS V(Vin)\n.meas TRAN Voutr RMS V(Vout)\n.meas TRAN Iinr RMS I(V1)\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Vgr1 RMS V(Vg1)\n.meas TRAN Vdr1 RMS V(Vd1)\n.meas TRAN Vsr1 RMS V(Vs1)\n.meas TRAN Igr1 RMS Ig(J1)\n.meas TRAN Isr1 RMS Is(J1)\n.meas TRAN Idr1 RMS Id(J1)\n.meas TRAN Vgavg1 AVG V(Vg1)\n.meas TRAN Vgmax1 MAX V(Vg1)\n.meas TRAN Vgmin1 MIN V(Vg1)\n.meas TRAN Vppr1 PARAM Vgmax1-Vgmin1\n.meas TRAN Vpr1 PARAM Vgmax1-Vgsoff\n.meas TRAN Cd1 PARAM Vpr1/Vppr1\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Vgr2 RMS V(Vg2)\n.meas TRAN Vdr2 RMS V(Vd2)\n.meas TRAN Vsr2 RMS V(Vs2)\n.meas TRAN Igr2 RMS Ig(J2)\n.meas TRAN Isr2 RMS Is(J2)\n.meas TRAN Idr2 RMS Id(J2)\n.meas TRAN Vgavg2 AVG V(Vg2)\n.meas TRAN Vgmax2 MAX V(Vg2)\n.meas TRAN Vgmin2 MIN V(Vg2)\n.meas TRAN Vppr2 PARAM Vgmax2-Vgmin2\n.meas TRAN Vpr2 PARAM Vgmax2-Vgsoff\n.meas TRAN Cd2 PARAM Vpr2/Vppr2\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Pdis1 AVG (V(Vd1,Vs1)*Id(J1)+V(Vg1,Vs1)*Ig(J1))\n.meas TRAN Pdis2 AVG (V(Vd2,Vs2)*Id(J2)+V(Vg2,Vs2)*Ig(J2))\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Zin PARAM Vinr/Iinr\n.meas TRAN Zout PARAM Vdr1/Idr1\n.meas TRAN Cd1Angle PARAM Cd1*360\n.meas TRAN Pin AVG (Zin*I(V1)*I(V1))\n.meas TRAN Pout AVG (V(Vout)*I(Rout))\n;.meas TRAN Pmar PARAM Pout-Pdis\n ;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Gpr PARAM (Pout/Pin)\n.meas TRAN Gvr PARAM (Voutr/Vinr)\n.meas TRAN Gp PARAM 10*log10(Gpr)\n.meas TRAN Gv PARAM 20*log10(Gvr)\n \n \n.four {F} 4 -1 V(Vout)
TEXT -608 208 Left 2 ;.tran 0 20u 18u
TEXT -608 168 Left 2 !.ac dec 100 1Meg 30Meg
