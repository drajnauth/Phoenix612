Version 4
SHEET 1 3264 1496
WIRE 992 -272 928 -272
WIRE 1328 -272 1072 -272
WIRE 1408 -272 1328 -272
WIRE 1520 -272 1408 -272
WIRE 1696 -272 1520 -272
WIRE 1328 -240 1328 -272
WIRE 1408 -240 1408 -272
WIRE 1520 -240 1520 -272
WIRE 1696 -240 1696 -272
WIRE 112 -176 32 -176
WIRE 192 -176 112 -176
WIRE 272 -176 192 -176
WIRE 368 -176 352 -176
WIRE 416 -176 368 -176
WIRE 448 -176 416 -176
WIRE 928 -176 928 -272
WIRE 928 -176 448 -176
WIRE 1328 -160 1328 -176
WIRE 1408 -160 1408 -176
WIRE 32 -144 32 -176
WIRE 192 -144 192 -176
WIRE 368 -144 368 -176
WIRE 448 -144 448 -176
WIRE 928 -128 928 -176
WIRE 1152 -112 1120 -112
WIRE 1248 -112 1232 -112
WIRE 1344 -112 1312 -112
WIRE 1600 -112 1344 -112
WIRE 1872 -112 1600 -112
WIRE 32 -64 32 -80
WIRE 192 -64 192 -80
WIRE 368 -64 368 -80
WIRE 448 -64 448 -80
WIRE 1344 -64 1344 -112
WIRE 624 -48 512 -48
WIRE 800 -48 688 -48
WIRE 1344 -48 1344 -64
WIRE 416 -32 416 -176
WIRE 928 -32 928 -48
WIRE 512 -16 512 -48
WIRE 112 0 112 -176
WIRE 2016 16 1984 16
WIRE 2128 16 2080 16
WIRE 2144 16 2128 16
WIRE 800 32 800 -48
WIRE 880 32 800 32
WIRE 1008 32 960 32
WIRE 1120 32 1120 -112
WIRE 1120 32 1008 32
WIRE 1264 32 1120 32
WIRE 1296 32 1264 32
WIRE 2144 48 2144 16
WIRE 1696 64 1696 -160
WIRE 1760 64 1696 64
WIRE 1344 80 1344 48
WIRE 224 96 192 96
WIRE 320 96 304 96
WIRE 416 96 416 48
WIRE 416 96 384 96
WIRE 1696 96 1696 64
WIRE 1600 112 1600 -112
WIRE 1760 112 1760 64
WIRE 416 128 416 96
WIRE 512 128 512 64
WIRE 624 128 512 128
WIRE 800 128 688 128
WIRE 1872 128 1872 -112
WIRE 1984 128 1984 16
WIRE 416 144 416 128
WIRE 2144 160 2144 128
WIRE 1696 176 1696 160
WIRE -176 192 -208 192
WIRE -48 192 -96 192
WIRE -16 192 -48 192
WIRE 112 192 112 80
WIRE 112 192 48 192
WIRE 192 192 192 96
WIRE 192 192 112 192
WIRE 288 192 192 192
WIRE 352 192 288 192
WIRE 1520 208 1520 -160
WIRE 1600 208 1600 192
WIRE 1600 208 1520 208
WIRE -208 224 -208 192
WIRE 112 240 112 192
WIRE 1520 240 1520 208
WIRE 1984 240 1984 208
WIRE 416 256 416 240
WIRE 528 256 416 256
WIRE 416 288 416 256
WIRE 528 288 528 256
WIRE 1136 288 1120 288
WIRE 1232 288 1216 288
WIRE 1328 288 1296 288
WIRE 1472 288 1328 288
WIRE -208 320 -208 304
WIRE 1520 320 1520 304
WIRE 112 336 112 320
WIRE 1328 336 1328 288
WIRE 1328 352 1328 336
WIRE 416 400 416 368
WIRE 528 400 528 352
WIRE 528 400 416 400
WIRE 1472 416 1472 288
WIRE 1760 416 1760 192
WIRE 1760 416 1472 416
WIRE 1872 416 1872 208
WIRE 1872 416 1760 416
WIRE 800 432 800 128
WIRE 880 432 800 432
WIRE 1072 432 960 432
WIRE 1120 432 1120 288
WIRE 1120 432 1072 432
WIRE 1248 432 1120 432
WIRE 1280 432 1248 432
WIRE 416 448 416 400
WIRE 1008 464 1008 32
WIRE 1072 464 1072 432
WIRE 1328 480 1328 448
WIRE 832 608 752 608
WIRE 912 608 832 608
WIRE 1008 608 1008 544
WIRE 1008 608 912 608
WIRE 1072 608 1072 544
WIRE 1168 608 1072 608
WIRE 1264 608 1168 608
WIRE 1344 608 1264 608
WIRE 752 640 752 608
WIRE 832 640 832 608
WIRE 912 640 912 608
WIRE 1168 640 1168 608
WIRE 1264 640 1264 608
WIRE 1344 640 1344 608
WIRE 1008 704 1008 608
WIRE 1072 704 1072 608
WIRE 752 720 752 704
WIRE 832 720 832 704
WIRE 912 720 912 704
WIRE 1168 720 1168 704
WIRE 1264 720 1264 704
WIRE 1344 720 1344 704
WIRE 1008 832 1008 784
WIRE 1008 832 944 832
WIRE 1072 832 1072 784
WIRE 1072 832 1008 832
WIRE 1120 832 1072 832
WIRE 1008 864 1008 832
WIRE 1120 864 1120 832
WIRE 1008 960 1008 928
WIRE 1120 960 1120 944
FLAG 192 -64 0
FLAG 32 -64 0
FLAG 928 -32 0
FLAG -208 320 0
FLAG 112 336 0
FLAG 416 448 0
FLAG 368 -64 0
FLAG 448 -64 0
FLAG 288 192 Vb
FLAG 416 256 Ve
FLAG -48 192 Vin
FLAG 416 128 Vc
FLAG 2128 16 Vout
FLAG 1120 960 0
FLAG 1328 480 0
FLAG 1248 432 Vg1
FLAG 1328 336 Vd1
FLAG 1008 960 0
FLAG 944 832 Vbias
FLAG 1344 80 0
FLAG 1264 32 Vg2
FLAG 1344 -64 Vd2
FLAG 1696 176 0
FLAG 1984 240 0
FLAG 2144 160 0
FLAG 1520 320 0
FLAG 912 720 0
FLAG 1168 720 0
FLAG 1264 720 0
FLAG 1344 720 0
FLAG 752 720 0
FLAG 832 720 0
FLAG 1408 -160 0
FLAG 1328 -160 0
SYMBOL voltage -208 208 R0
WINDOW 0 -45 11 Left 2
WINDOW 3 -214 95 Left 2
WINDOW 123 -214 123 Left 2
WINDOW 39 -214 151 Left 2
SYMATTR InstName V1
SYMATTR Value SINE(0 {S} {F})
SYMATTR Value2 AC 1
SYMATTR SpiceLine Rser={Z}
SYMBOL voltage 928 -144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL res 96 -16 R0
SYMATTR InstName R1
SYMATTR Value 535
SYMBOL res 96 224 R0
SYMATTR InstName R2
SYMATTR Value 72
SYMBOL res 400 272 R0
SYMATTR InstName R4
SYMATTR Value 3
SYMBOL cap 176 -144 R0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL cap 16 -144 R0
SYMATTR InstName C2
SYMATTR Value .1µ
SYMBOL ind2 400 -48 R0
WINDOW 0 -46 36 Left 2
WINDOW 3 -58 82 Left 2
SYMATTR InstName L1
SYMATTR Value 35µ
SYMATTR Type ind
SYMBOL ind 256 -160 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName RFC5
SYMATTR Value 1µ
SYMBOL cap 352 -144 R0
SYMATTR InstName C4
SYMATTR Value 1µ
SYMBOL cap 432 -144 R0
SYMATTR InstName C5
SYMATTR Value .1µ
SYMBOL cap 48 176 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C7
SYMATTR Value .1µ
SYMBOL cap 512 288 R0
SYMATTR InstName C6
SYMATTR Value .1µ
SYMBOL npn 352 144 R0
SYMATTR InstName Q1
SYMATTR Value BD139
SYMBOL res 2128 32 R0
SYMATTR InstName Rout
SYMATTR Value 50R
SYMBOL ind2 496 -32 R0
WINDOW 0 44 28 Left 2
WINDOW 3 44 76 Left 2
SYMATTR InstName L2
SYMATTR Value 35µ
SYMATTR Type ind
SYMBOL voltage 1120 848 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value {B}
SYMBOL res 992 448 R0
SYMATTR InstName R3
SYMATTR Value {R}
SYMBOL nmos 1280 352 R0
SYMATTR InstName M1
SYMATTR Value RD16HHF1
SYMBOL cap 992 864 R0
SYMATTR InstName C8
SYMATTR Value .1µ
SYMBOL nmos 1296 -48 R0
SYMATTR InstName M2
SYMATTR Value RD16HHF1
SYMBOL ind2 1856 112 R0
SYMATTR InstName L6
SYMATTR Value 11.1µ
SYMATTR Type ind
SYMBOL ind2 1744 96 R0
SYMATTR InstName RFC1
SYMATTR Value 35µ
SYMATTR Type ind
SYMBOL cap 1680 96 R0
SYMATTR InstName C9
SYMATTR Value .1µ
SYMBOL cap 2080 0 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C10
SYMATTR Value .1µ
SYMBOL cap 1504 240 R0
SYMATTR InstName C11
SYMATTR Value .1µ
SYMBOL ind2 1584 96 R0
SYMATTR InstName RFC2
SYMATTR Value 35µ
SYMATTR Type ind
SYMBOL ind2 1968 112 R0
SYMATTR InstName L7
SYMATTR Value 33.3µ
SYMATTR Type ind
SYMBOL res 1504 -256 R0
SYMATTR InstName R5
SYMATTR Value .001
SYMBOL res 1680 -256 R0
SYMATTR InstName R6
SYMATTR Value .001
SYMBOL res 976 416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RVG1
SYMATTR Value .1R
SYMBOL res 976 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RVG2
SYMATTR Value .1R
SYMBOL cap 1312 -128 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C12
SYMATTR Value 10n
SYMBOL cap 1296 272 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C13
SYMATTR Value 10n
SYMBOL res 1232 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 200
SYMBOL res 1248 -128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 200
SYMBOL res 1056 448 R0
SYMATTR InstName R9
SYMATTR Value {R}
SYMBOL ind 1056 688 R0
WINDOW 0 25 5 Left 2
WINDOW 3 41 48 Left 2
SYMATTR InstName RFC3
SYMATTR Value 1µ
SYMBOL ind 992 688 R0
WINDOW 0 -58 53 Left 2
WINDOW 3 -20 80 Left 2
SYMATTR InstName RFC4
SYMATTR Value 1µ
SYMBOL cap 896 640 R0
SYMATTR InstName C14
SYMATTR Value .1µ
SYMBOL cap 1152 640 R0
SYMATTR InstName C15
SYMATTR Value .1µ
SYMBOL cap 1248 640 R0
SYMATTR InstName C16
SYMATTR Value 10µ
SYMBOL cap 1328 640 R0
SYMATTR InstName C17
SYMATTR Value 1µ
SYMBOL cap 736 640 R0
SYMATTR InstName C18
SYMATTR Value 10µ
SYMBOL cap 816 640 R0
SYMATTR InstName C19
SYMATTR Value 1µ
SYMBOL res -80 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RVB
SYMATTR Value .1R
SYMBOL ind 976 -256 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName RFC6
SYMATTR Value 1µ
SYMBOL cap 1392 -240 R0
SYMATTR InstName C3
SYMATTR Value 1µ
SYMBOL cap 1312 -240 R0
SYMATTR InstName C20
SYMATTR Value .1µ
SYMBOL cap 688 -64 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C21
SYMATTR Value .1µ
SYMBOL cap 688 112 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C22
SYMATTR Value .1µ
SYMBOL cap 384 80 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C23
SYMATTR Value 100n
SYMBOL res 320 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 100
TEXT -384 64 Left 2 !.tran 0 10u
TEXT 2568 -456 Left 2 !.options plotwinsize=0\n.options numdgt = 8\n \n \n.meas TRAN Vinr RMS V(Vin)\n \n.meas TRAN Voutr RMS V(Vout)\n.meas TRAN Iinr RMS I(V1)\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Ibr RMS I(RVB)\n.meas TRAN Vbr RMS V(Vb)\n.meas TRAN Icr RMS Ic(Q1)\n.meas TRAN Vcr RMS V(Vc)\n.meas TRAN Vbavg AVG V(Vb)\n.meas TRAN Vbmax MAX V(Vb)\n.meas TRAN Vbmin MIN V(Vb)\n.meas TRAN Vppr PARAM Vbmax-Vbmin\n.meas TRAN Vpr PARAM Vbmax-Vbe\n.meas TRAN Cd PARAM Vpr/Vppr\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Vgr1 RMS V(Vg1)\n.meas TRAN Vgavg1 AVG V(Vg1)\n.meas TRAN Vgmax1 MAX V(Vg1)\n.meas TRAN Vgmin1 MIN V(Vg1)\n.meas TRAN Vbiasr1 RMS V(Vbias)\n.meas TRAN Vppr3 PARAM Vgmax1-Vgmin1\n.meas TRAN Vpr3 PARAM Vgmax1-Vgs\n.meas TRAN Cd3 PARAM Vpr3/Vppr3\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Igr2 RMS I(RVG2)\n.meas TRAN Vgr2 RMS V(Vg2)\n.meas TRAN Vdr2 RMS V(Vd2)\n.meas TRAN Idr2 RMS Id(M2)\n.meas TRAN Vgavg2 AVG V(Vg2)\n.meas TRAN Vgmax2 MAX V(Vg2)\n.meas TRAN Vgmin2 MIN V(Vg2)\n.meas TRAN Vbiasr2 RMS V(Vbias)\n.meas TRAN Vppr4 PARAM Vgmax2-Vgmin2\n.meas TRAN Vpr4 PARAM Vgmax2-Vgs\n.meas TRAN Cd4 PARAM Vpr4/Vppr4\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN CdAngleQ1 PARAM Cd*360\n.meas TRAN CdAngleM1 PARAM Cd3*360\n.meas TRAN CdAngleM2 PARAM Cd4*360\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Pdis AVG (V(Vc,Ve)*Ic(Q1) + V(Vb,Ve)*Ib(Q1))\n.meas TRAN Pdis3 AVG (V(vd1)*Id(m1) + V(vg1)*Ig(m1))\n.meas TRAN Pdis4 AVG (V(vd2)*Id(m2) + V(vg2)*Ig(m2))\n.meas TRAN Pin PARAM Iinr*Vinr \n.meas TRAN Pout AVG (V(Vout)*I(Rout))\n.meas TRAN Pmar1 PARAM Pout-Pdis\n.meas TRAN Pmar3 PARAM Pout-Pdis3\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Zin PARAM Vinr/Iinr\n.meas TRAN Q2Zin PARAM Vbr/Ibr\n.meas TRAN Q2Zout PARAM Vcr/Icr \n.meas TRAN M1Zin PARAM Vgr2/Igr2 \n.meas TRAN M1Zout PARAM Vdr2/Idr2 \n ;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Gp PARAM 10*log10(Pout/Pin)\n.meas TRAN Gv PARAM 20*log10(Voutr/Vinr)\n \n.four {F} 4 -1 V(Vout)
TEXT -304 -240 Left 2 !;.step param F list 1.5Meg 3.7Meg 5.37Meg 7.1Meg 10.1Meg 14.1Meg 21.1Meg 28.7Meg\n.step param F list 3.7Meg 14.1Meg 28.7Meg\n;.param F 30Meg\n.param S .08\n.param B 4.2\n.param Z .5\n.param R 1000\n.param Vgs=3.6\n.param Vbe 0.7
TEXT 600 32 Left 2 !K1 L1 L2 1
TEXT -392 104 Left 2 ;.ac dec 1000 1Meg 30Meg
TEXT 1888 280 Left 2 !K3 L6 L7 1
TEXT 1288 168 Left 2 !K2 RFC2 RFC1 1
TEXT 1904 392 Left 2 ;Was 28u 63u
TEXT 1248 808 Left 2 ;Mosfet bias voltage\nadjusted to match current\nthrough drains
TEXT 440 24 Left 4 ;T1
TEXT 1640 96 Left 4 ;T2
TEXT 1920 120 Left 4 ;T3
TEXT 600 80 Left 2 ;Voltage here is not symetric
TEXT -208 424 Left 2 ;.step param R 5 100 5
