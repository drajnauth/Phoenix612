Version 4
SHEET 1 5068 2568
WIRE 1776 -176 1584 -176
WIRE 1920 -176 1776 -176
WIRE 2608 -176 1920 -176
WIRE 2816 -176 2608 -176
WIRE 2896 -176 2816 -176
WIRE 3008 -176 2896 -176
WIRE 3184 -176 3008 -176
WIRE 3296 -176 3184 -176
WIRE 1776 -160 1776 -176
WIRE 2816 -160 2816 -176
WIRE 2896 -160 2896 -176
WIRE 3008 -160 3008 -176
WIRE 3184 -160 3184 -176
WIRE 1584 -144 1584 -176
WIRE 3296 -144 3296 -176
WIRE 1920 -128 1920 -176
WIRE 2608 -128 2608 -176
WIRE 1776 -80 1776 -96
WIRE 2816 -80 2816 -96
WIRE 2896 -80 2896 -96
WIRE 3008 -80 3008 -96
WIRE 3184 -80 3184 -96
WIRE 1584 -48 1584 -64
WIRE 1920 -32 1920 -48
WIRE 1920 -32 1856 -32
WIRE 1984 -32 1920 -32
WIRE 3200 -32 3120 -32
WIRE 3296 -32 3296 -64
WIRE 3296 -32 3200 -32
WIRE 1856 -16 1856 -32
WIRE 1984 -16 1984 -32
WIRE 2496 -16 2400 -16
WIRE 2608 -16 2608 -48
WIRE 2608 -16 2496 -16
WIRE 2656 -16 2608 -16
WIRE 2688 -16 2656 -16
WIRE 3120 -16 3120 -32
WIRE 3200 -16 3200 -32
WIRE 2400 0 2400 -16
WIRE 2496 0 2496 -16
WIRE 1856 64 1856 48
WIRE 1984 64 1984 48
WIRE 3120 64 3120 48
WIRE 3200 64 3200 48
WIRE 2400 80 2400 64
WIRE 2496 80 2496 64
WIRE 1904 96 1872 96
WIRE 3440 96 3392 96
WIRE 3600 96 3504 96
WIRE 3600 112 3600 96
WIRE 1872 128 1872 96
WIRE 1920 128 1920 -32
WIRE 3296 144 3296 -32
WIRE 3392 144 3392 96
WIRE 2816 192 2800 192
WIRE 2896 192 2880 192
WIRE 2656 208 2656 -16
WIRE 2656 208 2608 208
WIRE 2736 208 2688 208
WIRE 3600 208 3600 192
WIRE 2736 224 2736 208
WIRE 2608 240 2608 208
WIRE 2688 240 2688 208
WIRE 3392 256 3392 224
WIRE 1904 272 1904 96
WIRE 1920 272 1920 208
WIRE 1920 272 1904 272
WIRE 1936 272 1920 272
WIRE 2016 272 2000 272
WIRE 2048 272 2016 272
WIRE 2160 272 2128 272
WIRE 2224 272 2160 272
WIRE 2336 272 2336 192
WIRE 2336 272 2304 272
WIRE 2896 272 2896 192
WIRE 2016 304 2016 272
WIRE 2160 304 2160 272
WIRE 2688 336 2688 320
WIRE 2800 336 2800 192
WIRE 2800 336 2688 336
WIRE 2336 352 2336 272
WIRE 2896 368 2896 352
WIRE 2928 368 2896 368
WIRE 3296 368 3296 224
WIRE 1344 384 1264 384
WIRE 1376 384 1344 384
WIRE 1472 384 1440 384
WIRE 1584 384 1584 304
WIRE 1584 384 1552 384
WIRE 1616 384 1584 384
WIRE 2608 384 2608 320
WIRE 1616 400 1616 384
WIRE 2608 400 2608 384
WIRE 3296 400 3296 368
WIRE 1264 416 1264 384
WIRE 1872 416 1872 208
WIRE 1872 416 1808 416
WIRE 2016 416 2016 384
WIRE 2080 416 2016 416
WIRE 2160 416 2160 384
WIRE 2160 416 2080 416
WIRE 2080 432 2080 416
WIRE 2336 480 2336 416
WIRE 2400 480 2336 480
WIRE 2528 480 2480 480
WIRE 2560 480 2528 480
WIRE 2896 480 2896 368
WIRE 2992 480 2960 480
WIRE 3024 480 2992 480
WIRE 3088 480 3024 480
WIRE 3248 480 3168 480
WIRE 1616 496 1616 464
WIRE 1680 496 1616 496
WIRE 1792 496 1760 496
WIRE 1824 496 1792 496
WIRE 1264 512 1264 496
WIRE 2992 512 2992 480
WIRE 1616 528 1616 496
WIRE 2608 528 2608 496
WIRE 3296 528 3296 496
WIRE 1872 544 1872 512
WIRE 2336 544 2336 480
WIRE 2096 720 1984 720
WIRE 2144 720 2096 720
WIRE 2336 720 2336 624
WIRE 2336 720 2224 720
WIRE 2832 720 2800 720
WIRE 2864 720 2832 720
WIRE 2992 720 2992 592
WIRE 2992 720 2944 720
WIRE 1424 752 1264 752
WIRE 1472 752 1424 752
WIRE 1616 752 1616 608
WIRE 1616 752 1552 752
WIRE 2336 752 2336 720
WIRE 2800 752 2800 720
WIRE 2992 752 2992 720
WIRE 1424 768 1424 752
WIRE 2096 768 2096 720
WIRE 1616 784 1616 752
WIRE 2336 832 2336 816
WIRE 2992 832 2992 816
WIRE 1424 848 1424 832
WIRE 2096 848 2096 832
WIRE 2800 848 2800 832
WIRE 1616 864 1616 848
WIRE 928 880 864 880
WIRE 1040 880 1008 880
WIRE 1120 880 1040 880
WIRE 1152 880 1120 880
WIRE 1264 880 1264 752
WIRE 1264 880 1152 880
WIRE 864 912 864 880
WIRE 1152 912 1152 880
WIRE 1040 928 1040 880
WIRE 1264 928 1264 880
WIRE 1984 928 1984 720
WIRE 1984 928 1264 928
WIRE 864 992 864 976
WIRE 1040 1008 1040 992
WIRE 1152 1008 1152 992
FLAG 1264 512 0
FLAG 3600 96 Vout
FLAG 3600 208 0
FLAG 1344 384 Vin
FLAG 1328 416 0
FLAG 2608 528 0
FLAG 2528 480 Vg3
FLAG 2608 384 Vd3
FLAG 2496 80 0
FLAG 2096 848 0
FLAG 2336 832 0
FLAG 1120 880 Vbias1
FLAG 3296 528 0
FLAG 3024 480 Vg4
FLAG 3296 368 Vd4
FLAG 3200 64 0
FLAG 3184 -80 0
FLAG 3392 256 0
FLAG 2992 832 0
FLAG 2928 368 Vzs3
FLAG 2800 848 0
FLAG 2832 720 Vbias2
FLAG 3008 -80 0
FLAG 3120 64 0
FLAG 2400 80 0
FLAG 2896 -80 0
FLAG 2816 -80 0
FLAG 1584 -48 0
FLAG 1040 1008 0
FLAG 864 992 0
FLAG 1152 1008 0
FLAG 1872 544 0
FLAG 1792 496 Vg2
FLAG 1808 416 Vd2
FLAG 1424 848 0
FLAG 1616 864 0
FLAG 1776 -80 0
FLAG 1584 304 Vzs1
FLAG 1856 64 0
FLAG 2336 192 Vzs2
FLAG 2080 432 0
FLAG 1984 64 0
FLAG 2736 224 0
SYMBOL voltage 1264 400 R0
WINDOW 0 -45 11 Left 2
WINDOW 3 -214 95 Left 2
WINDOW 123 -214 123 Left 2
WINDOW 39 -214 151 Left 2
SYMATTR InstName V1
SYMATTR Value SINE(0 {S} {F})
SYMATTR Value2 AC 1
SYMATTR SpiceLine Rser={Z}
SYMBOL res 3584 96 R0
SYMATTR InstName Rout
SYMATTR Value 50R
SYMBOL ind2 2592 224 R0
SYMATTR InstName L5
SYMATTR Value 12µ
SYMATTR Type ind
SYMBOL res 2320 528 R0
SYMATTR InstName R14
SYMATTR Value 100R
SYMBOL cap 2480 0 R0
SYMATTR InstName C18
SYMATTR Value .1µ
SYMBOL ind2 2128 736 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 4 56 VBottom 2
SYMATTR InstName RFC7
SYMATTR Value 10µ
SYMATTR Type ind
SYMBOL cap 2080 768 R0
SYMATTR InstName C19
SYMATTR Value .1µ
SYMBOL cap 2320 752 R0
SYMATTR InstName C20
SYMATTR Value .1µ
SYMBOL ind2 2672 224 R0
SYMATTR InstName L6
SYMATTR Value 12µ
SYMATTR Type ind
SYMBOL nmos 3248 400 R0
SYMATTR InstName M4
SYMATTR Value RD16HHF1
SYMBOL ind2 3280 128 R0
SYMATTR InstName L7
SYMATTR Value 12.5µ
SYMATTR Type ind
SYMBOL ind2 3280 -160 R0
SYMATTR InstName RFC4
SYMATTR Value 66µ
SYMATTR Type ind
SYMBOL cap 3184 -16 R0
SYMATTR InstName C22
SYMATTR Value .1µ
SYMBOL ind2 3376 128 R0
SYMATTR InstName L8
SYMATTR Value 50µ
SYMATTR Type ind
SYMBOL cap 3168 -160 R0
SYMATTR InstName C23
SYMATTR Value .1µ
SYMBOL res 2880 256 R0
SYMATTR InstName Rzs3
SYMATTR Value .001
SYMBOL cap 2960 464 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C24
SYMATTR Value .1µ
SYMBOL res 2976 496 R0
SYMATTR InstName R15
SYMATTR Value 100
SYMBOL ind2 2848 736 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 4 56 VBottom 2
SYMATTR InstName RFC8
SYMATTR Value 10µ
SYMATTR Type ind
SYMBOL cap 2976 752 R0
SYMATTR InstName C25
SYMATTR Value .1µ
SYMBOL cap 2816 208 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C26
SYMATTR Value .1µ
SYMBOL voltage 2800 736 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V5
SYMATTR Value {BM2}
SYMBOL cap 2992 -160 R0
SYMATTR InstName C28
SYMATTR Value 220µ
SYMBOL cap 3104 -16 R0
SYMATTR InstName C29
SYMATTR Value 470µ
SYMBOL cap 1376 400 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 38 VBottom 2
SYMATTR InstName C30
SYMATTR Value .1µ
SYMBOL nmos 2560 400 R0
SYMATTR InstName M3
SYMATTR Value BS170
SYMATTR Prefix X
SYMBOL cap 2384 0 R0
SYMATTR InstName C31
SYMATTR Value 22µ
SYMBOL cap 3504 80 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C16
SYMATTR Value .1µ
SYMBOL cap 2880 -160 R0
SYMATTR InstName C2
SYMATTR Value 10µ
SYMBOL cap 2800 -160 R0
SYMATTR InstName C3
SYMATTR Value 1µ
SYMBOL voltage 1584 -160 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value 12
SYMBOL ind2 912 896 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 4 56 VBottom 2
SYMATTR InstName RFC5
SYMATTR Value 10µ
SYMATTR Type ind
SYMBOL cap 1024 928 R0
SYMATTR InstName C1
SYMATTR Value .1µ
SYMBOL cap 848 912 R0
SYMATTR InstName C4
SYMATTR Value .1µ
SYMBOL voltage 1152 896 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V6
SYMATTR Value {BM1}
SYMBOL nmos 1824 416 R0
WINDOW 3 56 60 Left 2
SYMATTR Value BS170
SYMATTR InstName M2
SYMATTR Prefix X
SYMBOL res 1600 512 R0
SYMATTR InstName R2
SYMATTR Value 100
SYMBOL ind2 1456 768 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 4 56 VBottom 2
SYMATTR InstName RFC6
SYMATTR Value 10µ
SYMATTR Type ind
SYMBOL cap 1408 768 R0
SYMATTR InstName C6
SYMATTR Value .1µ
SYMBOL cap 1600 784 R0
SYMATTR InstName C7
SYMATTR Value .1µ
SYMBOL cap 1600 400 R0
SYMATTR InstName C8
SYMATTR Value .1µ
SYMBOL cap 1760 -160 R0
SYMATTR InstName C9
SYMATTR Value .1µ
SYMBOL res 1568 368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 30 56 VTop 2
SYMATTR InstName Rzs1
SYMATTR Value .0001
SYMBOL ind2 1856 112 R0
WINDOW 0 -35 40 Left 2
WINDOW 3 -37 76 Left 2
SYMATTR InstName L3
SYMATTR Value 12µ
SYMATTR Type ind
SYMBOL ind2 1904 112 R0
SYMATTR InstName L4
SYMATTR Value 12µ
SYMATTR Type ind
SYMBOL cap 1840 -16 R0
SYMATTR InstName C13
SYMATTR Value .1µ
SYMBOL res 2320 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 30 56 VTop 2
SYMATTR InstName Rzs2
SYMATTR Value .0001
SYMBOL res 2144 256 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 2.2
SYMBOL res 2000 288 R0
SYMATTR InstName R7
SYMATTR Value 2.2K
SYMBOL res 2144 288 R0
SYMATTR InstName R8
SYMATTR Value 2.2K
SYMBOL cap 2000 256 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C14
SYMATTR Value .1µ
SYMBOL cap 2320 352 R0
SYMATTR InstName C15
SYMATTR Value .1µ
SYMBOL res 1904 -144 R0
SYMATTR InstName R9
SYMATTR Value 10
SYMBOL cap 1968 -16 R0
SYMATTR InstName C17
SYMATTR Value 1µ
SYMBOL res 2592 -144 R0
SYMATTR InstName R11
SYMATTR Value 10
SYMBOL res 3184 464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1.2
SYMBOL res 2496 464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 1.2
SYMBOL res 1776 480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1.2
TEXT 3736 -584 Left 2 !.options plotwinsize=0\n.options numdgt = 8\n \n \n.meas TRAN Vinr RMS V(Vin)\n.meas TRAN Voutr RMS V(Vout)\n.meas TRAN Iinr RMS I(V1)\n.meas TRAN Ioutr RMS I(Rout)\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Vgr2 RMS V(Vg2)\n.meas TRAN Vdr2 RMS V(Vd2)\n.meas TRAN Idr2 RMS Ix(M2:D)\n.meas TRAN Igr2 RMS Ix(M2:D)\n.meas TRAN Vgavg2 AVG V(Vg2)\n.meas TRAN Vgmax2 MAX V(Vg2)\n.meas TRAN Vgmin2 MIN V(Vg2)\n.meas TRAN Vbiasr2 RMS V(Vbias1)\n.meas TRAN Vppr2 PARAM Vgmax2-Vgmin2\n.meas TRAN Vpr2 PARAM Vgmax2-Vgs1\n.meas TRAN CdM2 PARAM Vpr2/Vppr2\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Vgr3 RMS V(Vg3)\n.meas TRAN Vdr3 RMS V(Vd3)\n.meas TRAN Idr3 RMS Ix(M3:D)\n.meas TRAN Igr3 RMS Ix(M3:D)\n.meas TRAN Vgavg3 AVG V(Vg3)\n.meas TRAN Vgmax3 MAX V(Vg3)\n.meas TRAN Vgmin3 MIN V(Vg3)\n.meas TRAN Vbiasr3 RMS V(Vbias1)\n.meas TRAN Vppr3 PARAM Vgmax3-Vgmin3\n.meas TRAN Vpr3 PARAM Vgmax3-Vgs1\n.meas TRAN CdM3 PARAM Vpr3/Vppr3\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Vgr4 RMS V(Vg4)\n.meas TRAN Vdr4 RMS V(Vd4)\n.meas TRAN Idr4 RMS Id(M4)\n.meas TRAN Igr4 RMS Ig(M4)\n.meas TRAN Vgavg4 AVG V(Vg4)\n.meas TRAN Vgmax4 MAX V(Vg4)\n.meas TRAN Vgmin4 MIN V(Vg4)\n.meas TRAN Vbiasr4 RMS V(Vbias2)\n.meas TRAN Vppr4 PARAM Vgmax4-Vgmin4\n.meas TRAN Vpr4 PARAM Vgmax4-Vgs2\n.meas TRAN CdM4 PARAM Vpr4/Vppr4\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN PdisM2 AVG (V(vd2)*Ix(M2:D) + V(vg2)*Ix(M2:G))\n.meas TRAN PdisM3 AVG (V(vd3)*Ix(M3:D) + V(vg3)*Ix(M3:G))\n.meas TRAN PdisM4 AVG (V(vd4)*Id(M4) + V(vg4)*Ig(M4))\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Vzsr1 RMS V(Vzs1)\n.meas TRAN Izsr1 RMS I(Rzs1)\n.meas TRAN Vzsr2 RMS V(Vzs2)\n.meas TRAN Izsr2 RMS I(Rzs2)\n.meas TRAN Vzsr3 RMS V(Vzs3)\n.meas TRAN Izsr3 RMS I(Rzs3)\n.meas TRAN Zin PARAM Vinr/Iinr\n.meas TRAN ZinM2 PARAM Vzsr1/Izsr1\n.meas TRAN ZinM3 PARAM Vzsr2/Izsr2\n.meas TRAN ZinM4 PARAM Vzsr3/Izsr3\n.meas TRAN ZoutM2 PARAM Vdr2/Idr2\n.meas TRAN ZoutM3 PARAM Vdr3/Idr3\n.meas TRAN ZoutM4 PARAM Vdr4/Idr4\n.meas TRAN CdAngleM2 PARAM CdM2*360\n.meas TRAN CdAngleM3 PARAM CdM3*360\n.meas TRAN CdAngleM4 PARAM CdM4*360\n.meas TRAN Pin PARAM Iinr*Vinr\n ;;;;;;;;;;;;;;;\n.meas TRAN Pout AVG (V(Vout)*I(Rout))\n.meas TRAN PoutdBm PARAM 10*log10(Pout*1000)\n.meas TRAN Pdis PARAM PdisM4+PdisM3+PdisM2\n.meas TRAN Pmar PARAM Pout-Pdis\n ;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN GM2 PARAM (Vzsr2/Vzsr1)\n.meas TRAN GM3 PARAM (Vzsr3/Vzsr2)\n.meas TRAN GM4 PARAM (Voutr/Vzsr3)\n.meas TRAN Gvr PARAM (Voutr/Vinr)\n.meas TRAN Gir PARAM (Ioutr/Iinr)\n.meas TRAN Gpr PARAM (Pout/Pin)\n.meas TRAN Gv PARAM 20*log10(Gvr)\n.meas TRAN Gi PARAM 20*log10(Gir)\n.meas TRAN Gp PARAM 10*log10(Gpr)\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n .four {F} 4 -1 V(Vzs1)\n .four {F} 4 -1 V(Vzs2)\n .four {F} 4 -1 V(Vzs3)\n.four {F} 4 -1 V(Vout)
TEXT 2440 184 Left 2 !K3 L5 L6 1
TEXT 3152 136 Left 2 !K4 L7 L8 1
TEXT 2560 576 Left 2 !.include BS170.lib
TEXT 1832 -336 Left 2 !.tran 20u
TEXT 320 -336 Left 2 !;.step param F list 1.5Meg 3.7Meg 5.37Meg 7.1Meg 10.1Meg 14.1Meg 21.1Meg 28.7Meg\n.step param F list 3.7Meg 7.1Meg 14.1Meg 28.7Meg\n;.param F 28.7Meg\n.param S 0.017  ; this is about -25dBm\n.param BM2 4.5\n.param BM1 3.0\n.param R 9K\n;.step param S 0.05 0.1 0.01\n.param Z 1\n.param Vbe 0.65\n.param Vgs2 3.6\n.param Vgs1 2.1
TEXT 1736 120 Left 2 !K2 L3 L4 1
TEXT 3312 304 Left 2 ;3:6T BN43-302
TEXT 1648 176 Left 2 ;4:1 Z ratio\n10 BFT
TEXT 2440 264 Left 2 ;1:1 Z ratio\n10 BFT
TEXT 2008 192 Left 2 ;0.5dB 50R PAD
