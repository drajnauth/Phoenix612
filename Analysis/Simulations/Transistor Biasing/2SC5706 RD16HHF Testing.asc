Version 4
SHEET 1 3748 1496
WIRE 288 -624 112 -624
WIRE 480 -624 288 -624
WIRE 560 -624 480 -624
WIRE 624 -624 560 -624
WIRE 704 -624 624 -624
WIRE 800 -624 704 -624
WIRE 928 -624 800 -624
WIRE 1632 -624 1008 -624
WIRE 1808 -624 1632 -624
WIRE 288 -592 288 -624
WIRE 480 -592 480 -624
WIRE 560 -592 560 -624
WIRE 624 -592 624 -624
WIRE 704 -592 704 -624
WIRE 1632 -592 1632 -624
WIRE 1808 -592 1808 -624
WIRE 112 -576 112 -624
WIRE 800 -576 800 -624
WIRE 480 -512 480 -528
WIRE 560 -512 560 -528
WIRE 624 -512 624 -528
WIRE 704 -512 704 -528
WIRE 288 -496 288 -512
WIRE 288 -496 256 -496
WIRE 432 -496 288 -496
WIRE 800 -480 800 -496
WIRE 640 -464 512 -464
WIRE 768 -464 704 -464
WIRE 1264 -464 1232 -464
WIRE 1360 -464 1344 -464
WIRE 1456 -464 1424 -464
WIRE 1712 -464 1456 -464
WIRE 1984 -464 1712 -464
WIRE 112 -448 112 -496
WIRE 112 -448 16 -448
WIRE 432 -448 432 -496
WIRE 512 -432 512 -464
WIRE 1808 -432 1808 -512
WIRE 1920 -432 1808 -432
WIRE 16 -416 16 -448
WIRE 1456 -416 1456 -464
WIRE 112 -400 112 -448
WIRE 1456 -400 1456 -416
WIRE 1712 -400 1712 -464
WIRE 1808 -400 1808 -432
WIRE 1920 -352 1920 -368
WIRE 256 -336 224 -336
WIRE 352 -336 336 -336
WIRE 432 -336 432 -368
WIRE 432 -336 416 -336
WIRE 2128 -336 2096 -336
WIRE 2240 -336 2192 -336
WIRE 2256 -336 2240 -336
WIRE 16 -320 16 -352
WIRE 768 -320 768 -464
WIRE 944 -320 768 -320
WIRE 1120 -320 1024 -320
WIRE 1232 -320 1232 -464
WIRE 1232 -320 1120 -320
WIRE 1376 -320 1232 -320
WIRE 1408 -320 1376 -320
WIRE 2256 -304 2256 -336
WIRE 512 -288 512 -352
WIRE 624 -288 512 -288
WIRE 1632 -288 1632 -512
WIRE 1712 -288 1712 -320
WIRE 1712 -288 1632 -288
WIRE 1456 -272 1456 -304
WIRE 432 -256 432 -336
WIRE 1632 -256 1632 -288
WIRE 432 -224 432 -256
WIRE 1984 -224 1984 -464
WIRE 2096 -224 2096 -336
WIRE 2256 -192 2256 -224
WIRE -256 -176 -432 -176
WIRE -32 -176 -192 -176
WIRE 112 -176 112 -320
WIRE 112 -176 48 -176
WIRE 224 -176 224 -336
WIRE 224 -176 112 -176
WIRE 304 -176 224 -176
WIRE 368 -176 304 -176
WIRE 1632 -176 1632 -192
WIRE -432 -144 -432 -176
WIRE 112 -144 112 -176
WIRE 432 -112 432 -128
WIRE 2096 -112 2096 -144
WIRE 432 -80 432 -112
WIRE 624 -64 624 -288
WIRE 640 -64 624 -64
WIRE 848 -64 704 -64
WIRE 1248 -64 1232 -64
WIRE 1344 -64 1328 -64
WIRE 1440 -64 1408 -64
WIRE 1584 -64 1440 -64
WIRE -432 -48 -432 -64
WIRE 112 -32 112 -64
WIRE 1440 -16 1440 -64
WIRE 1440 0 1440 -16
WIRE 432 32 432 0
WIRE 1584 64 1584 -64
WIRE 1808 64 1808 -320
WIRE 1808 64 1584 64
WIRE 1984 64 1984 -144
WIRE 1984 64 1808 64
WIRE 848 80 848 -64
WIRE 928 80 848 80
WIRE 1184 80 1008 80
WIRE 1232 80 1232 -64
WIRE 1232 80 1184 80
WIRE 1360 80 1232 80
WIRE 1392 80 1360 80
WIRE 1120 112 1120 -320
WIRE 1184 112 1184 80
WIRE 1440 128 1440 96
WIRE 944 256 864 256
WIRE 1024 256 944 256
WIRE 1120 256 1120 192
WIRE 1120 256 1024 256
WIRE 1184 256 1184 192
WIRE 1280 256 1184 256
WIRE 1376 256 1280 256
WIRE 1456 256 1376 256
WIRE 864 288 864 256
WIRE 944 288 944 256
WIRE 1024 288 1024 256
WIRE 1280 288 1280 256
WIRE 1376 288 1376 256
WIRE 1456 288 1456 256
WIRE 1120 352 1120 256
WIRE 1184 352 1184 256
WIRE 864 368 864 352
WIRE 944 368 944 352
WIRE 1024 368 1024 352
WIRE 1280 368 1280 352
WIRE 1376 368 1376 352
WIRE 1456 368 1456 352
WIRE 1120 480 1120 432
WIRE 1120 480 1056 480
WIRE 1184 480 1184 432
WIRE 1184 480 1120 480
WIRE 1232 480 1184 480
WIRE 1120 512 1120 480
WIRE 1232 512 1232 480
WIRE 1120 608 1120 576
WIRE 1232 608 1232 592
FLAG 800 -480 0
FLAG -432 -48 0
FLAG 2240 -336 Vout
FLAG 304 -176 Vb
FLAG 432 -112 Ve
FLAG 432 -256 Vc
FLAG 112 -32 0
FLAG 624 -512 0
FLAG 704 -512 0
FLAG 480 -512 0
FLAG 560 -512 0
FLAG 1232 608 0
FLAG 1440 128 0
FLAG 1360 80 Vg1
FLAG 1440 -16 Vd1
FLAG 1120 608 0
FLAG 1056 480 Vbias
FLAG 1456 -272 0
FLAG 1376 -320 Vg2
FLAG 1456 -416 Vd2
FLAG 1920 -352 0
FLAG 2096 -112 0
FLAG 2256 -192 0
FLAG 1632 -176 0
FLAG 1024 368 0
FLAG 1280 368 0
FLAG 16 -320 0
FLAG 1376 368 0
FLAG 1456 368 0
FLAG 864 368 0
FLAG 944 368 0
FLAG 432 32 0
FLAG -432 -176 Vin
FLAG 256 -432 0
SYMBOL voltage -432 -160 R0
WINDOW 0 -45 11 Left 2
WINDOW 3 -214 95 Left 2
WINDOW 123 -214 123 Left 2
WINDOW 39 -215 151 Left 2
SYMATTR InstName V1
SYMATTR Value SINE(0 {S} {F})
SYMATTR Value2 AC 1
SYMATTR SpiceLine Rser={Z}
SYMBOL voltage 800 -592 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL res 2240 -320 R0
SYMATTR InstName Rout
SYMATTR Value 50R
SYMBOL cap -192 -192 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C7
SYMATTR Value .1µ
SYMBOL npn 368 -224 R0
SYMATTR InstName Q1
SYMATTR Value 2SC5706
SYMBOL res 416 -96 R0
SYMATTR InstName R1
SYMATTR Value 0.5
SYMBOL res 96 -160 R0
SYMATTR InstName R5
SYMATTR Value 200
SYMBOL ind2 416 -464 R0
SYMATTR InstName L1
SYMATTR Value 35µ
SYMATTR Type ind
SYMBOL ind2 496 -448 R0
WINDOW 3 36 73 Left 2
SYMATTR InstName L2
SYMATTR Value 35µ
SYMATTR Type ind
SYMBOL cap 608 -592 R0
SYMATTR InstName C2
SYMATTR Value 10µ
SYMBOL cap 688 -592 R0
SYMATTR InstName C9
SYMATTR Value 1µ
SYMBOL cap 464 -592 R0
SYMATTR InstName C6
SYMATTR Value 100µ
SYMBOL cap 544 -592 R0
SYMATTR InstName C8
SYMATTR Value .1µ
SYMBOL voltage 1232 496 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value {B}
SYMBOL nmos 1392 0 R0
SYMATTR InstName M1
SYMATTR Value RD16HHF1
SYMBOL cap 1104 512 R0
SYMATTR InstName C3
SYMATTR Value .1µ
SYMBOL nmos 1408 -400 R0
SYMATTR InstName M2
SYMATTR Value RD16HHF1
SYMBOL ind2 1968 -240 R0
SYMATTR InstName L12
SYMATTR Value 11.1µ
SYMATTR Type ind
SYMBOL ind2 1792 -416 R0
SYMATTR InstName RFC16
SYMATTR Value 35µ
SYMATTR Type ind
SYMBOL cap 1904 -432 R0
SYMATTR InstName C10
SYMATTR Value .1µ
SYMBOL cap 2192 -352 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C11
SYMATTR Value .1µ
SYMBOL cap 1616 -256 R0
SYMATTR InstName C14
SYMATTR Value .1µ
SYMBOL ind2 1696 -416 R0
WINDOW 0 -62 27 Left 2
WINDOW 3 -42 54 Left 2
SYMATTR InstName RFC15
SYMATTR Value 35µ
SYMATTR Type ind
SYMBOL ind2 2080 -240 R0
SYMATTR InstName L13
SYMATTR Value 33.3µ
SYMATTR Type ind
SYMBOL res 1616 -608 R0
SYMATTR InstName R9
SYMATTR Value .001
SYMBOL res 1792 -608 R0
SYMATTR InstName R10
SYMATTR Value .001
SYMBOL res 64 -192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RVB1
SYMATTR Value .1R
SYMBOL res 1024 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RVG1
SYMATTR Value .001
SYMBOL res 1040 -336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName RVG2
SYMATTR Value .001
SYMBOL cap 1424 -480 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 10n
SYMBOL cap 1408 -80 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 10n
SYMBOL res 1344 -80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 500
SYMBOL res 1360 -480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 500
SYMBOL cap 416 -352 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C13
SYMATTR Value 450p
SYMBOL res 352 -352 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 25
SYMBOL ind 1168 336 R0
WINDOW 0 40 62 Left 2
WINDOW 3 38 87 Left 2
SYMATTR InstName RFC5
SYMATTR Value 1µ
SYMBOL ind 1104 336 R0
WINDOW 0 -53 60 Left 2
WINDOW 3 -43 85 Left 2
SYMATTR InstName RFC6
SYMATTR Value 1µ
SYMBOL cap 1008 288 R0
SYMATTR InstName C1
SYMATTR Value .1µ
SYMBOL cap 1264 288 R0
SYMATTR InstName C16
SYMATTR Value .1µ
SYMBOL res 96 -416 R0
SYMATTR InstName R14
SYMATTR Value 1400
SYMBOL ind 96 -592 R0
SYMATTR InstName RFC11
SYMATTR Value 1µ
SYMBOL cap 0 -416 R0
SYMATTR InstName C18
SYMATTR Value .1µ
SYMBOL cap 1360 288 R0
SYMATTR InstName C19
SYMATTR Value 10µ
SYMBOL cap 1440 288 R0
SYMATTR InstName C20
SYMATTR Value 1µ
SYMBOL cap 848 288 R0
SYMATTR InstName C21
SYMATTR Value 10µ
SYMBOL cap 928 288 R0
SYMATTR InstName C22
SYMATTR Value 1µ
SYMBOL cap 704 -480 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C12
SYMATTR Value .1µ
SYMBOL cap 704 -80 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C15
SYMATTR Value .1µ
SYMBOL ind 912 -608 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName RFC1
SYMATTR Value 1µ
SYMBOL res 1104 96 R0
SYMATTR InstName R2
SYMATTR Value {R}
SYMBOL res 1168 96 R0
SYMATTR InstName R4
SYMATTR Value {R}
SYMBOL ind 272 -608 R0
SYMATTR InstName RFC2
SYMATTR Value 10µ
SYMBOL cap 240 -496 R0
WINDOW 0 -37 9 Left 2
WINDOW 3 -31 44 Left 2
SYMATTR InstName C17
SYMATTR Value .1µ
TEXT -688 -384 Left 2 !.tran 0 10u 9.5u
TEXT -688 -344 Left 2 ;.ac dec 1000 1Meg 30Meg
TEXT 568 -344 Left 2 !K1 L1 L2 1
TEXT 2000 -72 Left 2 !K3 L12 L13 1
TEXT 1696 -264 Left 2 !K2 RFC15 RFC16 1
TEXT 2016 40 Left 2 ;Was 28u 63u
TEXT 1360 456 Left 2 ;Mosfet bias voltage\nadjusted to match current\nthrough drains
TEXT 328 -416 Left 4 ;T1
TEXT 1744 -360 Left 4 ;T3
TEXT 2032 -232 Left 4 ;T4
TEXT 2008 -784 Left 2 !;.step param F list 1.5Meg 3.7Meg 5.37Meg 7.1Meg 10.1Meg 14.1Meg 21.1Meg 28.7Meg\n;.step param F list 3.7Meg 14.1Meg 28.7Meg\n.param F 30Meg\n.param S .5\n.param B 4.2\n.param Z 1.6\n.param R 100\n.param Vgs=3.6\n.param Vbe 0.68
TEXT 2392 -704 Left 2 !.options plotwinsize=0\n.options numdgt = 8\n \n \n.meas TRAN Vinr RMS V(Vin)\n \n.meas TRAN Voutr RMS V(Vout)\n.meas TRAN Iinr RMS I(V1)\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Ibr RMS I(RVB1)\n.meas TRAN Vbr RMS V(Vb)\n.meas TRAN Icr RMS Ic(Q1)\n.meas TRAN Vcr RMS V(Vc)\n.meas TRAN Vbavg AVG V(Vb)\n.meas TRAN Vbmax MAX V(Vb)\n.meas TRAN Vbmin MIN V(Vb)\n.meas TRAN Vppr PARAM Vbmax-Vbmin\n.meas TRAN Vpr PARAM Vbmax-Vbe\n.meas TRAN Cd PARAM Vpr/Vppr\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Igr1 RMS I(RVG1)\n.meas TRAN Vgr1 RMS V(Vg1)\n.meas TRAN Vdr1 RMS V(Vd1)\n.meas TRAN Idr1 RMS Id(M1)\n.meas TRAN Vgavg1 AVG V(Vg1)\n.meas TRAN Vgmax1 MAX V(Vg1)\n.meas TRAN Vgmin1 MIN V(Vg1)\n.meas TRAN Vbiasr1 RMS V(Vbias)\n.meas TRAN Vppr3 PARAM Vgmax1-Vgmin1\n.meas TRAN Vpr3 PARAM Vgmax1-Vgs\n.meas TRAN Cd3 PARAM Vpr3/Vppr3\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Igr2 RMS I(RVG2)\n.meas TRAN Vgr2 RMS V(Vg2)\n.meas TRAN Vdr2 RMS V(Vd2)\n.meas TRAN Idr2 RMS Id(M2)\n.meas TRAN Vgavg2 AVG V(Vg2)\n.meas TRAN Vgmax2 MAX V(Vg2)\n.meas TRAN Vgmin2 MIN V(Vg2)\n.meas TRAN Vbiasr2 RMS V(Vbias)\n.meas TRAN Vppr4 PARAM Vgmax2-Vgmin2\n.meas TRAN Vpr4 PARAM Vgmax2-Vgs\n.meas TRAN Cd4 PARAM Vpr4/Vppr4\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN CdAngleQ1 PARAM Cd*360\n.meas TRAN CdAngleM1 PARAM Cd3*360\n.meas TRAN CdAngleM2 PARAM Cd4*360\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Pdis AVG (V(Vc,Ve)*Ic(Q1) + V(Vb,Ve)*Ib(Q1))\n.meas TRAN Pdis3 AVG (V(vd1)*Id(m1) + V(vg1)*Ig(m1))\n.meas TRAN Pdis4 AVG (V(vd2)*Id(m2) + V(vg2)*Ig(m2))\n.meas TRAN Pin PARAM Iinr*Vinr \n.meas TRAN Pout AVG (V(Vout)*I(Rout))\n.meas TRAN Pmar1 PARAM Pout-Pdis\n.meas TRAN Pmar3 PARAM Pout-Pdis3\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Zin PARAM Vinr/Iinr\n.meas TRAN Q2Zin PARAM Vbr/Ibr\n.meas TRAN Q2Zout PARAM Vcr/Icr \n.meas TRAN M1Zin PARAM Vgr1/Igr1 \n.meas TRAN M2Zin PARAM Vgr2/Igr2 \n.meas TRAN M1Zout PARAM Vdr2/Idr2 \n ;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Gp PARAM 10*log10(Pout/Pin)\n.meas TRAN Gv PARAM 20*log10(Voutr/Vinr)\n \n.four {F} 4 -1 V(Vout)
