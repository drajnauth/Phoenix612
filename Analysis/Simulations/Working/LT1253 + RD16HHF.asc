Version 4
SHEET 1 3748 1760
WIRE -1232 -336 -1568 -336
WIRE -1152 -336 -1232 -336
WIRE -304 -336 -1152 -336
WIRE -3344 -288 -3376 -288
WIRE -3248 -288 -3264 -288
WIRE -3232 -288 -3248 -288
WIRE -3040 -288 -3152 -288
WIRE -2992 -288 -3040 -288
WIRE -2656 -288 -2992 -288
WIRE -2592 -288 -2656 -288
WIRE -2192 -288 -2592 -288
WIRE -2144 -288 -2192 -288
WIRE -1808 -288 -2144 -288
WIRE -1744 -288 -1808 -288
WIRE -1568 -288 -1568 -336
WIRE -1568 -288 -1744 -288
WIRE -784 -272 -800 -272
WIRE -688 -272 -704 -272
WIRE -592 -272 -624 -272
WIRE -192 -272 -592 -272
WIRE -3376 -256 -3376 -288
WIRE -2992 -256 -2992 -288
WIRE -2592 -256 -2592 -288
WIRE -1232 -256 -1232 -272
WIRE -1152 -256 -1152 -272
WIRE -3248 -240 -3248 -288
WIRE -3248 -240 -3312 -240
WIRE -1568 -240 -1568 -288
WIRE -800 -240 -800 -272
WIRE -2144 -208 -2144 -224
WIRE -1744 -208 -1744 -224
WIRE -592 -208 -592 -272
WIRE -2992 -176 -2992 -192
WIRE -2592 -176 -2592 -192
WIRE -304 -176 -304 -336
WIRE -3312 -160 -3312 -176
WIRE -192 -160 -192 -272
WIRE 64 -160 -96 -160
WIRE 192 -160 128 -160
WIRE 224 -160 192 -160
WIRE -1568 -144 -1568 -160
WIRE 192 -144 192 -160
WIRE -3248 -128 -3248 -240
WIRE -1184 -128 -1216 -128
WIRE -1072 -128 -1104 -128
WIRE -960 -128 -1008 -128
WIRE -880 -128 -960 -128
WIRE -800 -128 -800 -160
WIRE -800 -128 -880 -128
WIRE -736 -128 -800 -128
WIRE -640 -128 -736 -128
WIRE -96 -112 -96 -160
WIRE -880 -96 -880 -128
WIRE -592 -96 -592 -112
WIRE -592 -80 -592 -96
WIRE -1808 -64 -1808 -288
WIRE -304 -64 -304 -96
WIRE -192 -64 -192 -80
WIRE -192 -64 -304 -64
WIRE -2192 -48 -2192 -288
WIRE -1840 -48 -1872 -48
WIRE -192 -48 -192 -64
WIRE 192 -48 192 -64
WIRE -2656 -32 -2656 -288
WIRE -2224 -32 -2256 -32
WIRE -1696 -32 -1776 -32
WIRE -1664 -32 -1696 -32
WIRE -1536 -32 -1536 -64
WIRE -1536 -32 -1584 -32
WIRE -1488 -32 -1536 -32
WIRE -1408 -32 -1424 -32
WIRE -304 -32 -304 -64
WIRE -3040 -16 -3040 -288
WIRE -2688 -16 -2720 -16
WIRE -2128 -16 -2160 -16
WIRE -2032 -16 -2128 -16
WIRE -1840 -16 -1952 -16
WIRE -96 -16 -96 -32
WIRE -3072 0 -3104 0
WIRE -2544 0 -2624 0
WIRE -2512 0 -2544 0
WIRE -2224 0 -2432 0
WIRE -2976 16 -3008 16
WIRE -2880 16 -2976 16
WIRE -2688 16 -2800 16
WIRE -1808 16 -1808 0
WIRE -1328 16 -1328 -32
WIRE -1216 16 -1216 -128
WIRE -3376 32 -3440 32
WIRE -3328 32 -3376 32
WIRE -3248 32 -3248 -48
WIRE -3248 32 -3264 32
WIRE -3216 32 -3248 32
WIRE -3072 32 -3136 32
WIRE -2192 32 -2192 16
WIRE -2656 48 -2656 32
WIRE -880 48 -880 -16
WIRE -880 48 -912 48
WIRE -304 48 -304 32
WIRE -3440 64 -3440 32
WIRE -3040 64 -3040 48
WIRE -912 64 -912 48
WIRE -2256 96 -2256 -32
WIRE -2224 96 -2256 96
WIRE -2128 96 -2128 -16
WIRE -2128 96 -2144 96
WIRE -1872 96 -1872 -48
WIRE -1840 96 -1872 96
WIRE -1696 96 -1696 -32
WIRE -1696 96 -1760 96
WIRE -752 96 -768 96
WIRE -656 96 -672 96
WIRE -560 96 -592 96
WIRE -192 96 -192 32
WIRE -192 96 -560 96
WIRE -3104 128 -3104 0
WIRE -3072 128 -3104 128
WIRE -2976 128 -2976 16
WIRE -2976 128 -2992 128
WIRE -2720 128 -2720 -16
WIRE -2688 128 -2720 128
WIRE -2544 128 -2544 0
WIRE -2544 128 -2608 128
WIRE -2256 128 -2256 96
WIRE -1872 128 -1872 96
WIRE -880 128 -880 48
WIRE -768 144 -768 96
WIRE -3440 160 -3440 144
WIRE -3104 160 -3104 128
WIRE -2720 160 -2720 128
WIRE -560 160 -560 96
WIRE -1328 208 -1328 96
WIRE -2256 224 -2256 208
WIRE -1872 224 -1872 208
WIRE -1216 240 -1216 96
WIRE -1184 240 -1216 240
WIRE -1088 240 -1104 240
WIRE -880 240 -880 208
WIRE -880 240 -1024 240
WIRE -800 240 -880 240
WIRE -768 240 -768 224
WIRE -768 240 -800 240
WIRE -704 240 -768 240
WIRE -608 240 -704 240
WIRE -3104 256 -3104 240
WIRE -2720 256 -2720 240
WIRE -560 272 -560 256
WIRE -960 288 -960 -128
WIRE -800 288 -800 240
WIRE -560 288 -560 272
WIRE -2256 304 -2256 288
WIRE -1872 304 -1872 288
WIRE -3104 336 -3104 320
WIRE -2720 336 -2720 320
WIRE -960 432 -960 368
WIRE -960 432 -1008 432
WIRE -912 432 -960 432
WIRE -800 432 -800 368
WIRE -800 432 -832 432
WIRE -736 432 -800 432
WIRE -576 432 -656 432
WIRE -960 464 -960 432
WIRE -800 464 -800 432
WIRE -576 528 -576 512
WIRE -960 592 -960 528
WIRE -800 592 -800 528
FLAG -3440 160 0
FLAG -3376 32 Vin
FLAG -2992 -176 0
FLAG -3312 -160 0
FLAG -3040 64 0
FLAG -2656 48 0
FLAG -2720 336 0
FLAG -2592 -176 0
FLAG -3376 -256 0
FLAG -3104 336 0
FLAG -2144 -208 0
FLAG -2192 32 0
FLAG -1808 16 0
FLAG -1872 304 0
FLAG -1744 -208 0
FLAG -2256 304 0
FLAG -1568 -144 0
FLAG 224 -160 Vout
FLAG 192 -48 0
FLAG -704 240 Vg1
FLAG -912 64 0
FLAG -304 48 0
FLAG -96 -16 0
FLAG -560 96 Vd1
FLAG -560 288 0
FLAG -560 272 Vs1
FLAG -736 -128 Vg2
FLAG -592 -272 Vd2
FLAG -592 -80 0
FLAG -592 -96 Vs2
FLAG -576 528 0
FLAG -960 592 0
FLAG -1008 432 Vbias
FLAG -1232 -256 0
FLAG -1152 -256 0
FLAG -800 592 0
FLAG -1328 208 0
FLAG -1536 -64 Vpa
SYMBOL voltage -3440 48 R0
WINDOW 0 -45 11 Left 2
WINDOW 3 -214 95 Left 2
WINDOW 123 -214 123 Left 2
WINDOW 39 -214 151 Left 2
SYMATTR InstName V1
SYMATTR Value SINE(0 {S} {F})
SYMATTR Value2 AC 1
SYMATTR SpiceLine Rser={Z}
SYMBOL voltage -1568 -256 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL Opamps\\LT1253 -3040 -48 R0
SYMATTR InstName U1
SYMBOL Opamps\\LT1253 -2656 -64 R0
SYMATTR InstName U2
SYMBOL res -3264 -144 R0
SYMATTR InstName R19
SYMATTR Value 50
SYMBOL res -3136 -304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 1K
SYMBOL res -3248 -304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 1K
SYMBOL res -3120 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R22
SYMATTR Value {R}
SYMBOL res -2592 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R24
SYMATTR Value 620
SYMBOL res -2976 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R25
SYMATTR Value 620
SYMBOL res -3088 256 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R26
SYMATTR Value 68
SYMBOL res -2704 256 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R27
SYMATTR Value 68
SYMBOL cap -3120 256 R0
WINDOW 0 36 38 Left 2
SYMATTR InstName C14
SYMATTR Value 100n
SYMBOL cap -2736 256 R0
SYMATTR InstName C15
SYMATTR Value 100n
SYMBOL cap -3328 -240 R0
SYMATTR InstName C22
SYMATTR Value 100n
SYMBOL cap -3008 -256 R0
SYMATTR InstName C23
SYMATTR Value 100n
SYMBOL cap -2608 -256 R0
SYMATTR InstName C24
SYMATTR Value 100n
SYMBOL cap -3264 16 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C25
SYMATTR Value 100n
SYMBOL Opamps\\LT1253 -2192 -80 R0
SYMATTR InstName U3
SYMBOL Opamps\\LT1253 -1808 -96 R0
SYMATTR InstName U4
SYMBOL res -1744 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 620
SYMBOL res -2128 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 620
SYMBOL res -2240 224 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R4
SYMATTR Value 68
SYMBOL res -1856 224 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R5
SYMATTR Value 68
SYMBOL cap -2272 224 R0
WINDOW 0 36 38 Left 2
SYMATTR InstName C1
SYMATTR Value 100n
SYMBOL cap -1888 224 R0
SYMATTR InstName C2
SYMATTR Value 100n
SYMBOL cap -2160 -288 R0
SYMATTR InstName C3
SYMATTR Value 100n
SYMBOL cap -1760 -288 R0
SYMATTR InstName C4
SYMATTR Value 100n
SYMBOL res -1568 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 50
SYMBOL cap -1424 -48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 0.1µ
SYMBOL res -2784 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value {R}
SYMBOL res -2416 -16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value {R}
SYMBOL res -1936 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value {R}
SYMBOL cap 128 -176 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value .1µ
SYMBOL res 176 -160 R0
SYMATTR InstName Rout
SYMATTR Value 50R
SYMBOL ind2 -1232 0 R0
SYMATTR InstName L2
SYMATTR Value 22µ
SYMATTR Type ind
SYMBOL res -896 -112 R0
SYMATTR InstName R9
SYMATTR Value 177
SYMBOL res -896 112 R0
SYMATTR InstName R10
SYMATTR Value 177
SYMBOL ind2 -208 -176 R0
SYMATTR InstName L3
SYMATTR Value 6µ
SYMATTR Type ind
SYMBOL ind2 -208 -64 R0
WINDOW 3 43 78 Left 2
SYMATTR Value 6µ
SYMATTR InstName L4
SYMATTR Type ind
SYMBOL ind2 -112 -128 R0
SYMATTR InstName L5
SYMATTR Value 14µ
SYMATTR Type ind
SYMBOL ind2 -320 -192 R0
SYMATTR InstName L6
SYMATTR Value 60µ
SYMATTR Type ind
SYMBOL cap -320 -32 R0
SYMATTR InstName C8
SYMATTR Value 100n
SYMBOL res -1088 -144 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rsense1
SYMATTR Value .001
SYMBOL res -1088 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rsense2
SYMATTR Value .001
SYMBOL cap -1008 -144 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C11
SYMATTR Value .1µ
SYMBOL cap -1024 224 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C12
SYMATTR Value .1µ
SYMBOL cap -592 80 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C13
SYMATTR Value .1µ
SYMBOL res -656 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 1000
SYMBOL nmos -608 160 R0
SYMATTR InstName M1
SYMATTR Value RD16HHF1
SYMBOL cap -624 -288 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C16
SYMATTR Value .1µ
SYMBOL res -688 -288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 1000
SYMBOL nmos -640 -208 R0
SYMATTR InstName M2
SYMATTR Value RD16HHF1
SYMBOL voltage -576 416 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value {B}
SYMBOL cap -976 464 R0
SYMATTR InstName C17
SYMATTR Value .1µ
SYMBOL cap -1248 -336 R0
SYMATTR InstName C7
SYMATTR Value 100n
SYMBOL cap -1168 -336 R0
SYMATTR InstName C9
SYMATTR Value 100µ
SYMBOL ind2 -1344 0 R0
SYMATTR InstName L1
SYMATTR Value {L}
SYMATTR Type ind
SYMBOL cap -816 464 R0
SYMATTR InstName C26
SYMATTR Value .1µ
SYMBOL res -976 272 R0
SYMATTR InstName R13
SYMATTR Value 50
SYMBOL res -816 272 R0
SYMATTR InstName R14
SYMATTR Value 50
SYMBOL ind -928 448 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L7
SYMATTR Value 1µ
SYMBOL ind -752 448 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L8
SYMATTR Value 1µ
SYMBOL res -1312 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rsense3
SYMATTR Value .001
SYMBOL ind -816 -256 R0
SYMATTR InstName L9
SYMATTR Value 1µ
SYMBOL ind -784 128 R0
SYMATTR InstName L10
SYMATTR Value 1µ
TEXT -2656 200 Left 2 ;5dB gain fixed here\nMay need 500R pot +68R here
TEXT -3488 256 Left 2 ;1K port +68R  \nUp to 20dB of gain here.
TEXT -1808 168 Left 2 ;5dB gain fixed here\nMay need 500R pot +68R here
TEXT -1480 -472 Left 2 !.tran 0 10u 5u
TEXT -160 96 Left 2 !K4 L3 L4 L5 1
TEXT -1136 8 Left 2 !K3 L1 L2 1
TEXT -1096 -440 Left 2 ;Bias B of 6.5 V seems to give best output.  What Vgs is this?
TEXT 704 -984 Left 2 !.options plotwinsize=0\n.options numdgt = 8\n \n \n.meas TRAN Vinr RMS V(Vin)\n.meas TRAN Voutr RMS V(Vout)\n.meas TRAN Iinr RMS I(V1)\n.meas TRAN Ioutr RMS I(Rout)\n.meas TRAN Iina AVG I(V1)\n.meas TRAN Vina AVG V(Vin)\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Vgr1 RMS V(Vg1)\n.meas TRAN Vdr1 RMS V(Vd1)\n.meas TRAN Idr1 RMS Id(M1)\n.meas TRAN Igr1 RMS Ig(m1)\n.meas TRAN Vgavg1 AVG V(Vg1)\n.meas TRAN Vgmax1 MAX V(Vg1)\n.meas TRAN Vgmin1 MIN V(Vg1)\n.meas TRAN Vbiasr1 RMS V(Vbias)\n.meas TRAN Vppr1 PARAM Vgmax1-Vgmin1\n.meas TRAN Vpr1 PARAM Vgmax1-Vgs\n.meas TRAN Cd1 PARAM Vpr1/Vppr1\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Vgr2 RMS V(Vg2)\n.meas TRAN Vdr2 RMS V(Vd2)\n.meas TRAN Idr2 RMS Id(M2)\n.meas TRAN Igr2 RMS Ig(m2)\n.meas TRAN Vgavg2 AVG V(Vg2)\n.meas TRAN Vgmax2 MAX V(Vg2)\n.meas TRAN Vgmin2 MIN V(Vg2)\n.meas TRAN Vbiasr2 RMS V(Vbias)\n.meas TRAN Vppr2 PARAM Vgmax2-Vgmin2\n.meas TRAN Vpr2 PARAM Vgmax2-Vgs\n.meas TRAN Cd2 PARAM Vpr2/Vppr2\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN CdAngle1 PARAM Cd1*360\n.meas TRAN CdAngle2 PARAM Cd2*360\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Is1 RMS I(Rsense1)\n.meas TRAN Is2 RMS I(Rsense2)\n.meas TRAN Is3 RMS I(Rsense3)\n.meas TRAN Vpar RMS V(Vpa)\n.meas TRAN Zout PARAM Vdr1/Idr1\n.meas TRAN Zin PARAM Vinr/Iinr\n.meas TRAN Zinpa PARAM Vpar/Is3\n.meas TRAN ZinQ1 PARAM Vgr1/Is1\n.meas TRAN ZinQ2 PARAM Vgr2/Is2 \n.meas TRAN ZoutQ1 PARAM Vdr1/Idr1\n.meas TRAN ZoutQ2 PARAM Vdr2/Idr2\n;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Pdis1 AVG (V(vd1)*Id(m1) + V(vg1)*Ig(m1))\n.meas TRAN Pdis2 AVG (V(vd2)*Id(m2) + V(vg2)*Ig(m2))\n.meas TRAN Pin RMS (V(Vin)*V(Vin)/Zin)\n.meas TRAN Pout AVG (V(Vout)*I(Rout))\n.meas TRAN Pmar PARAM Pout-Pdis1-Pdis2\n ;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Gp PARAM 10*log10(Pout/Pin)\n.meas TRAN Gv PARAM 20*log10(Voutr/Vinr)\n.meas TRAN Gi PARAM 20*log10(Ioutr/Iinr)\n.meas TRAN BetaQ1 PARAM Idr1/Igr1\n.meas TRAN BetaQ2 PARAM Idr2/Igr2\n \n \n.four {F} 4 -1 V(Vout)
TEXT -2512 -928 Left 2 !;.step param F list 1.5Meg 3.7Meg 5.37Meg 7.1Meg 10.1Meg 14.1Meg 21.1Meg 28.7Meg\n.step param F list 3.7Meg 14.1Meg 28.7Meg\n;.param F 30Meg\n;.step param S list 0.0015 0.045\n.param S 0.0015\n.param B 5.5\n.param L 34u\n.param R 9K\n.param Z 50\n.param Re 4\n.param Rec 2 \n.param Rb1 1040 \n.param Rb2 177 \n;.step param B 3 9 0.5\n;.step param L 6u 44u 2u\n;.step param R 8K 12K 1K\n;.step param L 10u 20u 2u\n.param Vbe 0.68\n.param Vgs 3.6
