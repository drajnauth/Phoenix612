Version 4
SHEET 1 5068 2568
WIRE 2400 -176 2304 -176
WIRE 2608 -176 2400 -176
WIRE 2688 -176 2608 -176
WIRE 2800 -176 2688 -176
WIRE 2976 -176 2800 -176
WIRE 3088 -176 2976 -176
WIRE 2304 -160 2304 -176
WIRE 2608 -160 2608 -176
WIRE 2688 -160 2688 -176
WIRE 2800 -160 2800 -176
WIRE 2976 -160 2976 -176
WIRE 3088 -144 3088 -176
WIRE 2400 -80 2400 -176
WIRE 2608 -80 2608 -96
WIRE 2688 -80 2688 -96
WIRE 2800 -80 2800 -96
WIRE 2976 -80 2976 -96
WIRE 2304 -64 2304 -80
WIRE 2992 -16 2912 -16
WIRE 3088 -16 3088 -64
WIRE 3088 -16 2992 -16
WIRE 3232 -16 3184 -16
WIRE 3392 -16 3296 -16
WIRE 2720 0 2576 0
WIRE 2912 0 2912 -16
WIRE 2992 0 2992 -16
WIRE 3392 0 3392 -16
WIRE 3088 32 3088 -16
WIRE 3184 32 3184 -16
WIRE 2304 80 2208 80
WIRE 2400 80 2400 0
WIRE 2400 80 2304 80
WIRE 2576 80 2576 0
WIRE 2576 80 2480 80
WIRE 2608 80 2576 80
WIRE 2720 80 2720 0
WIRE 2720 80 2688 80
WIRE 2752 80 2720 80
WIRE 2832 80 2816 80
WIRE 2912 80 2912 64
WIRE 2992 80 2992 64
WIRE 2208 96 2208 80
WIRE 2304 96 2304 80
WIRE 3392 96 3392 80
WIRE 2576 112 2576 80
WIRE 2720 112 2720 80
WIRE 2400 128 2400 80
WIRE 2480 128 2480 80
WIRE 3184 144 3184 112
WIRE 2832 160 2832 80
WIRE 2208 176 2208 160
WIRE 2304 176 2304 160
WIRE 2576 224 2576 192
WIRE 2640 224 2576 224
WIRE 2720 224 2720 192
WIRE 2720 224 2640 224
WIRE 2480 240 2480 208
WIRE 2640 240 2640 224
WIRE 2832 256 2832 240
WIRE 2880 256 2832 256
WIRE 3088 256 3088 112
WIRE 2400 272 2400 208
WIRE 2832 272 2832 256
WIRE 2400 288 2400 272
WIRE 3088 288 3088 256
WIRE 2048 368 1968 368
WIRE 2144 368 2048 368
WIRE 2224 368 2208 368
WIRE 2320 368 2224 368
WIRE 2352 368 2320 368
WIRE 2832 368 2832 352
WIRE 2864 368 2832 368
WIRE 2976 368 2928 368
WIRE 3008 368 2976 368
WIRE 3040 368 3008 368
WIRE 1968 400 1968 368
WIRE 2224 400 2224 368
WIRE 2976 400 2976 368
WIRE 2400 416 2400 384
WIRE 3088 416 3088 384
WIRE 1968 496 1968 480
WIRE 2224 528 2224 480
WIRE 2224 528 2128 528
WIRE 2128 608 2128 528
WIRE 2192 608 2128 608
WIRE 2304 608 2272 608
WIRE 2368 608 2304 608
WIRE 2416 608 2368 608
WIRE 2816 608 2784 608
WIRE 2848 608 2816 608
WIRE 2976 608 2976 480
WIRE 2976 608 2928 608
WIRE 2128 640 2128 608
WIRE 2416 640 2416 608
WIRE 2784 640 2784 608
WIRE 2976 640 2976 608
WIRE 2304 656 2304 608
WIRE 2128 720 2128 704
WIRE 2976 720 2976 704
WIRE 2304 736 2304 720
WIRE 2416 736 2416 720
WIRE 2784 736 2784 720
FLAG 1968 496 0
FLAG 3392 -16 Vout
FLAG 3392 96 0
FLAG 2048 368 Vin
FLAG 2032 400 0
FLAG 2400 416 0
FLAG 2320 368 Vg1
FLAG 2400 272 Vd1
FLAG 2304 176 0
FLAG 2304 736 0
FLAG 2128 720 0
FLAG 2416 736 0
FLAG 2368 608 Vbias1
FLAG 2480 240 0
FLAG 3088 416 0
FLAG 3008 368 Vg2
FLAG 3088 256 Vd2
FLAG 2992 80 0
FLAG 2976 -80 0
FLAG 3184 144 0
FLAG 2976 720 0
FLAG 2880 256 Vzs4
FLAG 2784 736 0
FLAG 2816 608 Vbias2
FLAG 2800 -80 0
FLAG 2912 80 0
FLAG 2208 176 0
FLAG 2304 -64 0
FLAG 2688 -80 0
FLAG 2608 -80 0
FLAG 2640 240 0
SYMBOL voltage 1968 384 R0
WINDOW 0 -45 11 Left 2
WINDOW 3 -214 95 Left 2
WINDOW 123 -214 123 Left 2
WINDOW 39 -214 151 Left 2
SYMATTR InstName V1
SYMATTR Value SINE(0 {S} {F})
SYMATTR Value2 AC 1
SYMATTR SpiceLine Rser={Z}
SYMBOL res 3376 -16 R0
SYMATTR InstName Rout
SYMATTR Value 50R
SYMBOL ind2 2384 112 R0
SYMATTR InstName L5
SYMATTR Value 12µ
SYMATTR Type ind
SYMBOL res 2208 384 R0
SYMATTR InstName R14
SYMATTR Value 4.7K
SYMBOL cap 2288 96 R0
SYMATTR InstName C18
SYMATTR Value .1µ
SYMBOL ind2 2176 624 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 4 56 VBottom 2
SYMATTR InstName RFC3
SYMATTR Value 10µ
SYMATTR Type ind
SYMBOL cap 2288 656 R0
SYMATTR InstName C19
SYMATTR Value .1µ
SYMBOL cap 2112 640 R0
SYMATTR InstName C20
SYMATTR Value .1µ
SYMBOL voltage 2416 624 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V4
SYMATTR Value {BM1}
SYMBOL ind2 2464 112 R0
SYMATTR InstName L6
SYMATTR Value 12µ
SYMATTR Type ind
SYMBOL nmos 3040 288 R0
SYMATTR InstName M2
SYMATTR Value RD16HHF1
SYMBOL ind2 3072 16 R0
SYMATTR InstName L7
SYMATTR Value 12.5µ
SYMATTR Type ind
SYMBOL ind2 3072 -160 R0
SYMATTR InstName RFC4
SYMATTR Value 66µ
SYMATTR Type ind
SYMBOL cap 2976 0 R0
SYMATTR InstName C22
SYMATTR Value .1µ
SYMBOL ind2 3168 16 R0
SYMATTR InstName L8
SYMATTR Value 50µ
SYMATTR Type ind
SYMBOL cap 2960 -160 R0
SYMATTR InstName C23
SYMATTR Value .1µ
SYMBOL res 2816 144 R0
SYMATTR InstName Rzs4
SYMATTR Value .001
SYMBOL cap 2928 352 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C24
SYMATTR Value .1µ
SYMBOL res 2960 384 R0
SYMATTR InstName R15
SYMATTR Value 10K
SYMBOL ind2 2832 624 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 4 56 VBottom 2
SYMATTR InstName RFC5
SYMATTR Value 10µ
SYMATTR Type ind
SYMBOL cap 2960 640 R0
SYMATTR InstName C25
SYMATTR Value .1µ
SYMBOL cap 2752 96 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C26
SYMATTR Value .1µ
SYMBOL voltage 2784 624 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V5
SYMATTR Value {BM2}
SYMBOL cap 2784 -160 R0
SYMATTR InstName C28
SYMATTR Value 220µ
SYMBOL cap 2896 0 R0
SYMATTR InstName C29
SYMATTR Value 470µ
SYMBOL res 2816 256 R0
WINDOW 0 -28 58 Left 2
WINDOW 3 -30 84 Left 2
SYMATTR InstName R16
SYMATTR Value 56
SYMBOL cap 2144 384 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C30
SYMATTR Value .1µ
SYMBOL nmos 2352 288 R0
SYMATTR InstName M1
SYMATTR Value BS170
SYMATTR Prefix X
SYMBOL ind2 2384 -96 R0
SYMATTR InstName RFC6
SYMATTR Value 66µ
SYMATTR Type ind
SYMBOL cap 2192 96 R0
SYMATTR InstName C31
SYMATTR Value 100µ
SYMBOL cap 3296 -32 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C16
SYMATTR Value .1µ
SYMBOL voltage 2304 -176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL cap 2672 -160 R0
SYMATTR InstName C2
SYMATTR Value 10µ
SYMBOL cap 2592 -160 R0
SYMATTR InstName C3
SYMATTR Value 1µ
SYMBOL res 2704 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10
SYMBOL res 2560 96 R0
SYMATTR InstName R2
SYMATTR Value 1800
SYMBOL res 2704 96 R0
SYMATTR InstName R3
SYMATTR Value 1800
TEXT 3736 -584 Left 2 !.options plotwinsize=0\n.options numdgt = 8\n \n \n.meas TRAN Vinr RMS V(Vin)\n.meas TRAN Voutr RMS V(Vout)\n.meas TRAN Iinr RMS I(V1)\n.meas TRAN Ioutr RMS I(Rout)\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Vgr1 RMS V(Vg1)\n.meas TRAN Vdr1 RMS V(Vd1)\n.meas TRAN Idr1 RMS Ix(M1:D)\n.meas TRAN Igr1 RMS Ix(M1:G)\n.meas TRAN Vgavg3 AVG V(Vg1)\n.meas TRAN Vgmax3 MAX V(Vg1)\n.meas TRAN Vgmin3 MIN V(Vg1)\n.meas TRAN Vbiasr3 RMS V(Vbias1)\n.meas TRAN Vppr3 PARAM Vgmax3-Vgmin3\n.meas TRAN Vpr3 PARAM Vgmax3-Vgs1\n.meas TRAN CdM1 PARAM Vpr3/Vppr3\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Vgr2 RMS V(Vg2)\n.meas TRAN Vdr2 RMS V(Vd2)\n.meas TRAN Idr2 RMS Id(M2)\n.meas TRAN Igr2 RMS Ig(M2)\n.meas TRAN Vgavg4 AVG V(Vg2)\n.meas TRAN Vgmax4 MAX V(Vg2)\n.meas TRAN Vgmin4 MIN V(Vg2)\n.meas TRAN Vbiasr4 RMS V(Vbias2)\n.meas TRAN Vppr4 PARAM Vgmax4-Vgmin4\n.meas TRAN Vpr4 PARAM Vgmax4-Vgs2\n.meas TRAN CdM2 PARAM Vpr4/Vppr4\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN PdisM1 AVG (V(vd1)*Ix(M1:D) + V(vg1)*Ix(M1:G))\n.meas TRAN PdisM2 AVG (V(vd2)*Id(m2) + V(vg2)*Ig(m2))\n;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN Vzsr4 RMS V(Vzs4)\n.meas TRAN Izsr4 RMS I(Rzs4)\n.meas TRAN Zin PARAM Vinr/Iinr\n.meas TRAN ZinM2 PARAM Vzsr4/Izsr4\n.meas TRAN ZoutM1 PARAM Vdr1/Idr1\n.meas TRAN ZoutM2 PARAM Vdr2/Idr2\n.meas TRAN CdAngleM1 PARAM CdM1*360\n.meas TRAN CdAngleM2 PARAM CdM2*360\n.meas TRAN Pin PARAM Iinr*Vinr\n ;;;;;;;;;;;;;;;\n.meas TRAN Pout AVG (V(Vout)*I(Rout))\n.meas TRAN Pdis PARAM PdisM1+PdisM2\n.meas TRAN Pmar PARAM Pout-Pdis\n ;;;;;;;;;;;;;;;;;;;;;;;;;;;\n.meas TRAN GM1 PARAM (Vzsr4/Vinr)\n.meas TRAN GM2 PARAM (Voutr/Vzsr4)\n.meas TRAN Gvr PARAM (Voutr/Vinr)\n.meas TRAN Gir PARAM (Ioutr/Iinr)\n.meas TRAN Gpr PARAM (Pout/Pin)\n.meas TRAN Gv PARAM 20*log10(Gvr)\n.meas TRAN Gi PARAM 20*log10(Gir)\n.meas TRAN Gp PARAM 10*log10(Gpr)\n;;;;;;;;;;;;;;;;;;;;;;;;;;;;\n .four {F} 4 -1 V(Vzs4)\n.four {F} 4 -1 V(Vout)
TEXT 2424 32 Left 2 !K3 L5 L6 1
TEXT 3104 208 Left 2 !K4 L7 L8 1
TEXT 2032 16 Left 2 ;Need about 100R at Drain
TEXT 2352 464 Left 2 !.include BS170.lib
TEXT 1752 1120 Left 2 !.tran 10u
TEXT 1560 -224 Left 2 !;.step param F list 1.5Meg 3.7Meg 5.37Meg 7.1Meg 10.1Meg 14.1Meg 21.1Meg 28.7Meg\n;.step param F list 3.7Meg 7.1Meg 14.1Meg 28.7Meg\n.param F 28.7Meg\n.param S 0.3\n.param BM2 4.5\n.param BM1 3.0\n.param R 9K\n;.step param S 0.05 0.1 0.01\n.param Z 1\n.param Vbe 0.65\n.param Vgs2 3.6\n.param Vgs1 2.1
